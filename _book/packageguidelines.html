<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Package Development in R</title>
  <meta name="description" content="This guide walks through the process of developing R package">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Package Development in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This guide walks through the process of developing R package" />
  <meta name="github-repo" content="amspector100/packageguidelines" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Package Development in R" />
  
  <meta name="twitter:description" content="This guide walks through the process of developing R package" />
  

<meta name="author" content="Asher Spector">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  


<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="0.1" data-path=""><a href="#what-is-a-package"><i class="fa fa-check"></i><b>0.1</b> What is a package?</a></li>
<li class="chapter" data-level="0.2" data-path=""><a href="#table-of-contents"><i class="fa fa-check"></i><b>0.2</b> Table of Contents</a></li>
<li class="chapter" data-level="0.3" data-path=""><a href="#what-do-i-need-to-know-before-reading-this-guide"><i class="fa fa-check"></i><b>0.3</b> What do I need to know before reading this guide?</a></li>
<li class="chapter" data-level="0.4" data-path=""><a href="#major-acknowledgements"><i class="fa fa-check"></i><b>0.4</b> Major Acknowledgements</a></li>
<li class="chapter" data-level="0.5" data-path=""><a href="#why-use-rstudio"><i class="fa fa-check"></i><b>0.5</b> 1. Why use RStudio?</a><ul>
<li class="chapter" data-level="0.5.1" data-path=""><a href="#what-if-you-dont-want-to-use-rstudio"><i class="fa fa-check"></i><b>0.5.1</b> 1.1 What if you don’t want to use RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="0.6" data-path=""><a href="#setting-up-rstudio"><i class="fa fa-check"></i><b>0.6</b> 2. Setting up RStudio</a><ul>
<li class="chapter" data-level="0.6.1" data-path=""><a href="#setting-up-r"><i class="fa fa-check"></i><b>0.6.1</b> 2.1 Setting up R</a></li>
<li class="chapter" data-level="0.6.2" data-path=""><a href="#downloading-development-tools"><i class="fa fa-check"></i><b>0.6.2</b> 2.2 Downloading Development Tools</a></li>
<li class="chapter" data-level="0.6.3" data-path=""><a href="#setting-up-rstudio-1"><i class="fa fa-check"></i><b>0.6.3</b> 2.3 Setting up RStudio</a></li>
</ul></li>
<li class="chapter" data-level="0.7" data-path=""><a href="#basic-rstudio-use"><i class="fa fa-check"></i><b>0.7</b> 3. Basic RStudio Use</a><ul>
<li class="chapter" data-level="0.7.1" data-path=""><a href="#screen-breakdown"><i class="fa fa-check"></i><b>0.7.1</b> 3.1 Screen Breakdown</a></li>
<li class="chapter" data-level="0.7.2" data-path=""><a href="#basic-commands"><i class="fa fa-check"></i><b>0.7.2</b> 3.2 Basic Commands</a></li>
</ul></li>
<li class="chapter" data-level="0.8" data-path=""><a href="#further-readingsources-cited"><i class="fa fa-check"></i><b>0.8</b> 4. Further Reading/Sources Cited</a></li>
<li class="chapter" data-level="0.9" data-path=""><a href="#why-use-gitgithub"><i class="fa fa-check"></i><b>0.9</b> 1. Why use Git/GitHub?</a><ul>
<li class="chapter" data-level="0.9.1" data-path=""><a href="#what-is-git"><i class="fa fa-check"></i><b>0.9.1</b> 1.1 What is Git?</a></li>
<li class="chapter" data-level="0.9.2" data-path=""><a href="#what-is-github"><i class="fa fa-check"></i><b>0.9.2</b> 1.2 What is GitHub?</a></li>
</ul></li>
<li class="chapter" data-level="0.10" data-path=""><a href="#setting-up-gitgithub"><i class="fa fa-check"></i><b>0.10</b> 2. Setting up Git/GitHub</a><ul>
<li class="chapter" data-level="0.10.1" data-path=""><a href="#making-a-github-account"><i class="fa fa-check"></i><b>0.10.1</b> 2.1 Making a GitHub account</a></li>
<li class="chapter" data-level="0.10.2" data-path=""><a href="#how-to-install-and-set-up-git"><i class="fa fa-check"></i><b>0.10.2</b> 2.2 How to Install and Set Up Git</a></li>
</ul></li>
<li class="chapter" data-level="0.11" data-path=""><a href="#starting-to-use-gitgithub"><i class="fa fa-check"></i><b>0.11</b> 3. Starting to use Git/GitHub</a><ul>
<li class="chapter" data-level="0.11.1" data-path=""><a href="#creating-projects-and-repositories"><i class="fa fa-check"></i><b>0.11.1</b> 3.1 Creating Projects and Repositories</a></li>
<li class="chapter" data-level="0.11.2" data-path=""><a href="#modifying-projects"><i class="fa fa-check"></i><b>0.11.2</b> 3.2 Modifying Projects</a></li>
<li class="chapter" data-level="0.11.3" data-path=""><a href="#accessing-older-versions-of-code"><i class="fa fa-check"></i><b>0.11.3</b> 3.3 Accessing older versions of code</a></li>
<li class="chapter" data-level="0.11.4" data-path=""><a href="#the-.gitignore-file"><i class="fa fa-check"></i><b>0.11.4</b> 3.4 The .gitignore file</a></li>
<li class="chapter" data-level="0.11.5" data-path=""><a href="#branching"><i class="fa fa-check"></i><b>0.11.5</b> 3.4 Branching</a></li>
<li class="chapter" data-level="0.11.6" data-path=""><a href="#conflicts"><i class="fa fa-check"></i><b>0.11.6</b> 3.5 Conflicts</a></li>
<li class="chapter" data-level="0.11.7" data-path=""><a href="#tips-and-tricks"><i class="fa fa-check"></i><b>0.11.7</b> 3.6 Tips and Tricks</a></li>
<li class="chapter" data-level="0.11.8" data-path=""><a href="#cheat-sheats"><i class="fa fa-check"></i><b>0.11.8</b> 3.7 Cheat sheats</a></li>
</ul></li>
<li class="chapter" data-level="0.12" data-path=""><a href="#further-reading"><i class="fa fa-check"></i><b>0.12</b> 4. Further reading</a></li>
<li class="chapter" data-level="0.13" data-path=""><a href="#sources-cited"><i class="fa fa-check"></i><b>0.13</b> 5. Sources cited</a></li>
<li class="chapter" data-level="0.14" data-path=""><a href="#motivation"><i class="fa fa-check"></i><b>0.14</b> 1. Motivation</a></li>
<li class="chapter" data-level="0.15" data-path=""><a href="#solutions"><i class="fa fa-check"></i><b>0.15</b> 2. Solutions</a><ul>
<li class="chapter" data-level="0.15.1" data-path=""><a href="#code-style"><i class="fa fa-check"></i><b>0.15.1</b> 2.1 Code Style</a></li>
<li class="chapter" data-level="0.15.2" data-path=""><a href="#documentation"><i class="fa fa-check"></i><b>0.15.2</b> 2.2 Documentation</a></li>
<li class="chapter" data-level="0.15.3" data-path=""><a href="#description"><i class="fa fa-check"></i><b>0.15.3</b> 2.3 Description</a></li>
<li class="chapter" data-level="0.15.4" data-path=""><a href="#namespace"><i class="fa fa-check"></i><b>0.15.4</b> 2.4 Namespace</a></li>
<li class="chapter" data-level="0.15.5" data-path=""><a href="#the-readme"><i class="fa fa-check"></i><b>0.15.5</b> 2.5 The README</a></li>
</ul></li>
<li class="chapter" data-level="0.16" data-path=""><a href="#the-walkthrough"><i class="fa fa-check"></i><b>0.16</b> 3. The Walkthrough</a><ul>
<li class="chapter" data-level="0.16.1" data-path=""><a href="#step-3.1-initializing-the-package"><i class="fa fa-check"></i><b>0.16.1</b> Step 3.1: Initializing the Package</a></li>
<li class="chapter" data-level="0.16.2" data-path=""><a href="#step-3.2-modifying-the-description-file"><i class="fa fa-check"></i><b>0.16.2</b> Step 3.2: Modifying the DESCRIPTION File</a></li>
<li class="chapter" data-level="0.16.3" data-path=""><a href="#step-3.3-starting-to-program"><i class="fa fa-check"></i><b>0.16.3</b> Step 3.3: Starting to Program</a></li>
<li class="chapter" data-level="0.16.4" data-path=""><a href="#step-3.3.3-warnings-and-simplicity"><i class="fa fa-check"></i><b>0.16.4</b> Step 3.3.3: Warnings and Simplicity</a></li>
<li class="chapter" data-level="0.16.5" data-path=""><a href="#step-3.4-documenting-your-package"><i class="fa fa-check"></i><b>0.16.5</b> Step 3.4: Documenting your package</a></li>
<li class="chapter" data-level="0.16.6" data-path=""><a href="#step-3.5-optional-adding-and-documenting-data"><i class="fa fa-check"></i><b>0.16.6</b> Step 3.5 (Optional): Adding and Documenting Data</a></li>
<li class="chapter" data-level="0.16.7" data-path=""><a href="#step-3.6-building-your-package"><i class="fa fa-check"></i><b>0.16.7</b> Step 3.6: Building Your Package</a></li>
</ul></li>
<li class="chapter" data-level="0.17" data-path=""><a href="#tips-and-tricks-1"><i class="fa fa-check"></i><b>0.17</b> 4. Tips and Tricks</a></li>
<li class="chapter" data-level="0.18" data-path=""><a href="#sources-cited-1"><i class="fa fa-check"></i><b>0.18</b> 5. Sources cited:</a></li>
<li class="chapter" data-level="0.19" data-path=""><a href="#why-should-you-test"><i class="fa fa-check"></i><b>0.19</b> 1. Why should you test?</a></li>
<li class="chapter" data-level="0.20" data-path=""><a href="#unit-tests"><i class="fa fa-check"></i><b>0.20</b> 2. Unit Tests</a><ul>
<li class="chapter" data-level="0.20.1" data-path=""><a href="#what-are-unit-tests"><i class="fa fa-check"></i><b>0.20.1</b> 2.1: What are unit tests?</a></li>
<li class="chapter" data-level="0.20.2" data-path=""><a href="#setting-up-the-testing-environment"><i class="fa fa-check"></i><b>0.20.2</b> 2.2: Setting up the testing environment</a></li>
<li class="chapter" data-level="0.20.3" data-path=""><a href="#expectations"><i class="fa fa-check"></i><b>0.20.3</b> 2.3: Expectations</a></li>
<li class="chapter" data-level="0.20.4" data-path=""><a href="#structure-and-location-of-unit-tests"><i class="fa fa-check"></i><b>0.20.4</b> 2.4: Structure and Location of Unit Tests</a></li>
<li class="chapter" data-level="0.20.5" data-path=""><a href="#tips-for-making-good-tests"><i class="fa fa-check"></i><b>0.20.5</b> 2.5: Tips for making good tests</a></li>
<li class="chapter" data-level="0.20.6" data-path=""><a href="#automated-checks-and-automated-testing"><i class="fa fa-check"></i><b>0.20.6</b> 2.6: Automated Checks and Automated Testing</a></li>
<li class="chapter" data-level="0.20.7" data-path=""><a href="#bonus-the-goodpractice-package"><i class="fa fa-check"></i><b>0.20.7</b> 2.7: Bonus: The goodpractice Package</a></li>
</ul></li>
<li class="chapter" data-level="0.21" data-path=""><a href="#integrated-tests"><i class="fa fa-check"></i><b>0.21</b> 3. Integrated Tests</a><ul>
<li class="chapter" data-level="0.21.1" data-path=""><a href="#motivation-1"><i class="fa fa-check"></i><b>0.21.1</b> 3.1 Motivation</a></li>
<li class="chapter" data-level="0.21.2" data-path=""><a href="#the-integrated-testing-workflow"><i class="fa fa-check"></i><b>0.21.2</b> 3.2 The integrated testing workflow</a></li>
<li class="chapter" data-level="0.21.3" data-path=""><a href="#setting-up-integrated-tests"><i class="fa fa-check"></i><b>0.21.3</b> 3.3 Setting up Integrated Tests</a></li>
</ul></li>
<li class="chapter" data-level="0.22" data-path=""><a href="#tips-and-tricks-2"><i class="fa fa-check"></i><b>0.22</b> 4. Tips and Tricks</a></li>
<li class="chapter" data-level="0.23" data-path=""><a href="#sources-cited."><i class="fa fa-check"></i><b>0.23</b> 5. Sources cited.</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Package Development in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Package Development in R</h1>
<h4 class="author"><em>Asher Spector</em></h4>
</div>
<p>If you want to skip the introduction, the next page in this guide is the guide to <a href="./rstudioguide.html">RStudio</a>. You might also want to look at the Table of Contents below. You can find the ‘devex’ example package linked <a href="https://github.com/amspector100/packageguidelines/tree/master/devex">here, on GitHub</a>.</p>
<div id="what-is-a-package" class="section level2">
<h2><span class="header-section-number">0.1</span> What is a package?</h2>
<p>Let’s say you wrote a script like this in R and wanted to make it easy for others to use.</p>
<div class="figure">
<img src="Images/badexample.PNG" alt="This is not what packages should look like" />
<p class="caption"><em>This is not what packages should look like</em></p>
</div>
<p>As you can probably tell, other users may not understand exactly what this script is supposed to do and how to use it. Even if they take the time to read through the source code and eventually figure it out, it might have been faster for them to just write the functions themselves. Packages solve this problem. Loosely speaking, <em>packages</em> are structured collections of code which aim to make your code easily sharable and reproducible. For example, any good package includes <em>documentation</em> which describes its functionality and use. Developing packages can be painstaking, but thankfully there are lots of tools today which make it extremely simple to create robust packages. This guide aims to run through how to use those tools and develop packages in R.</p>
</div>
<div id="table-of-contents" class="section level2">
<h2><span class="header-section-number">0.2</span> Table of Contents</h2>
<p>This guide is organized into two big parts.</p>
<ol style="list-style-type: decimal">
<li>In the first part of this guide, we’ll run through how to use two pieces of software which make developing packages a lot easier.
<ol style="list-style-type: lower-alpha">
<li>First, we’ll talk about <a href="./rstudioguide.html">RStudio</a>.</li>
<li>Then we’ll talk about <a href="./githubguide.html">GitHub</a>.</li>
</ol></li>
<li>In the second part of this guide, we’ll run through:
<ol style="list-style-type: lower-alpha">
<li><a href="./packagedev.html">The proper way to structure packages</a></li>
<li>and then <a href="./testingguide.html">the proper way to test packages</a> during development.</li>
</ol></li>
</ol>
<p>Lastly, we also wrote a small development example package (called ‘devex’) which you can find linked <a href="https://github.com/amspector100/packageguidelines/tree/master/devex">here, on GitHub</a>. If you haven’t used GitHub yet, don’t worry - we’ll go over how to use GitHub before discussing package structure.</p>
<p>Also, this guide is still under development, and we take feedback! If you find anything confusing or think the guide misses important contant, please email <a href="mailto:amspector100@gmail.com">amspector100@gmail.com</a>.</p>
</div>
<div id="what-do-i-need-to-know-before-reading-this-guide" class="section level2">
<h2><span class="header-section-number">0.3</span> What do I need to know before reading this guide?</h2>
<p>Almost nothing! You don’t need to know anything about Github, Rstudio, or package structure. However, this guide does assume you know how to do some programming in R. For example, if you want to develop a package which downloads and analyzes the content of politicians’ tweets, this guide will help you structure your code, but it won’t teach you how to scrape Twitter.</p>
</div>
<div id="major-acknowledgements" class="section level2">
<h2><span class="header-section-number">0.4</span> Major Acknowledgements</h2>
<p>It’s worth acknowledging a couple of people who helped make this guide possible.</p>
<ol style="list-style-type: decimal">
<li>A huge thanks to Simo Goshev at the IQSS, who helped design the structure of the guide and edited the content.</li>
<li>This guide was written for a different audience, but a lot of its structure and content is based on Hadley Wickham’s book <a href="http://r-pkgs.had.co.nz/">R Packages</a>. A huge thanks to him as well.</li>
</ol>
<p>We’ll also be citing specific sources on each page in the guide.</p>

<p>The previous page in the guide was the <a href="./index.html">Introduction</a>. The next page in the guide discusses <a href="./githubguide.html">GitHub</a>. This page will help you set up and install RStudio (we assume you are already somewhat familiar with R). If you already have RStudio installed and are comfortable using it, feel free to skip this section. Lastly, if you really don’t want to use RStudio, we’ll offer some alternatives in the first main section.</p>
</div>
<div id="why-use-rstudio" class="section level2">
<h2><span class="header-section-number">0.5</span> 1. Why use RStudio?</h2>
<p>RStudio has two main advantages, which is why we recommend it for package development.</p>
<p>First, RStudio is generally built to make users’ lives easier. It integrates documentation, makes graphics more accessible, and generally makes it easier to write scripts.</p>
<p>Second, RStudio has a suite of tools which make it easy to build well-documented, structured packages. Since this guide discusses package development, RStudio is the natural development environment.</p>
<div id="what-if-you-dont-want-to-use-rstudio" class="section level3">
<h3><span class="header-section-number">0.5.1</span> 1.1 What if you don’t want to use RStudio?</h3>
<p>(If you’re planning to use RStudio, you can skip this section).</p>
<p>Some users might not want to use RStudio. That’s not the end of the world - you can develop packages without RStudio, it’s just a bit more difficult. We highly recommend RStudio because it plays very nicely with the devtools and testthat packages (and a lot of this guide will be devoted to showing users around devtools/testthat). As a result, if you’d prefer not to use RStudio, you can probably just use the devtools/testthat functions directly by looking at their documentation and source code, as linked below. However, it also might be worth trying RStudio, at least for the duration of this guide.</p>
<p>Here are the links to the current (as of 5.4.18) versions of the <a href="https://www.rdocumentation.org/packages/devtools/versions/1.13.3">devtools documentation</a> and <a href="https://www.rdocumentation.org/packages/devtools/versions/1.13.3/source">source code</a>, and the <a href="https://www.rdocumentation.org/packages/testthat/versions/2.0.0">testthat documentation</a> and <a href="https://www.rdocumentation.org/packages/testthat/versions/2.0.0/source">source code</a>. If you don’t use RStudio, you’ll probably want to look through these as you work through the guide.</p>
</div>
</div>
<div id="setting-up-rstudio" class="section level2">
<h2><span class="header-section-number">0.6</span> 2. Setting up RStudio</h2>
<div id="setting-up-r" class="section level3">
<h3><span class="header-section-number">0.6.1</span> 2.1 Setting up R</h3>
<p>Presumably you’ve already been working with R, but you should make sure you have a recent enough version of R intalled. To do so, type “R.Version()” into the editor you’ve been working with previously. It should return an output titled “<span class="math inline">\(version.string\)</span>”, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">R.Version</span>()</code></pre></div>
<pre><code>## $platform
## [1] &quot;x86_64-w64-mingw32&quot;
## 
## $arch
## [1] &quot;x86_64&quot;
## 
## $os
## [1] &quot;mingw32&quot;
## 
## $system
## [1] &quot;x86_64, mingw32&quot;
## 
## $status
## [1] &quot;&quot;
## 
## $major
## [1] &quot;3&quot;
## 
## $minor
## [1] &quot;5.0&quot;
## 
## $year
## [1] &quot;2018&quot;
## 
## $month
## [1] &quot;04&quot;
## 
## $day
## [1] &quot;23&quot;
## 
## $`svn rev`
## [1] &quot;74626&quot;
## 
## $language
## [1] &quot;R&quot;
## 
## $version.string
## [1] &quot;R version 3.5.0 (2018-04-23)&quot;
## 
## $nickname
## [1] &quot;Joy in Playing&quot;</code></pre>
<p>If the number after the R version string is anything lower than 3.0.1, you’ll have to install a new version of R in order to use R Studio. To do so, follow the steps below:</p>
<ol style="list-style-type: decimal">
<li><p>Go to <a href="https://cran.rstudio.com/" class="uri">https://cran.rstudio.com/</a> and select “Download R for [Your Operating System].”</p></li>
<li><p>Click “base” and click “Download R [latest version] for [Your Operating System]” at the top of the page.</p></li>
<li><p>You can then let the installer run itself - the default settings should be fine for our purposes.</p></li>
</ol>
<p>Lastly, updating R on Windows can be a bit tricky. If you use Windows, you can also use the installr package to quickly update R, as documented <a href="https://www.r-statistics.com/2015/06/a-step-by-step-screenshots-tutorial-for-upgrading-r-on-windows/">here</a>. However, if you are having trouble installing the installr package, you can always just follow the instructions above.</p>
</div>
<div id="downloading-development-tools" class="section level3">
<h3><span class="header-section-number">0.6.2</span> 2.2 Downloading Development Tools</h3>
<p>You’ll also want to download some packages and tools that are important for package development. If you are running Windows, you can do so by following the instructions below:</p>
<ol style="list-style-type: decimal">
<li><p>Go to <a href="https://cran.rstudio.com/" class="uri">https://cran.rstudio.com/</a> and select “Download R for Windows.”</p></li>
<li><p>Click “RTools” and download the latest version of the tools (or the tools that are compatible with your version of R).</p></li>
<li><p>Let the installer run itself (the defaults are fine).</p></li>
</ol>
<p>For Mac/Linux users, head to RStudio and run the following code to download the two primary development packages you’ll need:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;devtools&#39;</span>)
<span class="kw">install.packages</span>(<span class="st">&#39;roxygen2&#39;</span>)</code></pre></div>
</div>
<div id="setting-up-rstudio-1" class="section level3">
<h3><span class="header-section-number">0.6.3</span> 2.3 Setting up RStudio</h3>
<p>To download and set up RStudio, follow the instructions below:</p>
<ol style="list-style-type: decimal">
<li><p>Head to <a href="https://www.rstudio.com/products/rstudio/download/" class="uri">https://www.rstudio.com/products/rstudio/download/</a> and click “download” for the free RStudio Desktop version</p></li>
<li><p>Download the <em>installer</em> for your operating system, not the <em>zip/tarball.</em> The picture below illustrates what the webpage should look like.</p></li>
</ol>
<div class="figure">
<img src="Images/rstudio.PNG" alt="RStudio Webpage" />
<p class="caption"><em>RStudio Webpage</em></p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Let the installer run - it’s fine again to just use the default options.</li>
</ol>
<p>and now you’re ready!</p>
</div>
</div>
<div id="basic-rstudio-use" class="section level2">
<h2><span class="header-section-number">0.7</span> 3. Basic RStudio Use</h2>
<div id="screen-breakdown" class="section level3">
<h3><span class="header-section-number">0.7.1</span> 3.1 Screen Breakdown</h3>
<p>RStudio will split your screen into four parts, as shown below. We’ll refer to them as the <em>script</em>, the <em>environment</em>, the <em>shell</em> or <em>console</em>, and the <em>Viewer.</em></p>
<div class="figure">
<img src="Images/rstudio2.PNG" alt="The RStudio Interface" />
<p class="caption">The RStudio Interface</p>
</div>
<p>The <em>script</em> is in the upper left hand corner of the screen, and it’s where you will do the bulk of your programming. To write an R script, click File&gt;New File&gt;R Script in the top left hand corner. You can execute multiple lines of a script (or the entire thing) at a time by selecting the lines you want to run and clicking the green “Run” button on the right hand side of the script box.</p>
<p>The <em>shell</em> is in the lower left hand corner of the screen. Unlike scripts, which presumably you’ve worked with before, shells only run one line of code at a time. However, shells also remember what you did before. For example, if you define download some data into the shell, you can manipulate it repeatedly without having to download it again before each manipulation - it will stay in the shell’s memory until you manually remove it.</p>
<p>All scripts that you run will be run through the shell - that is, if you run a script, all of the code from the script will appear in the shell. This means that you can run a script and manipulate the results directly from the bottom of the shell, without having to rerun the script each time you want to manipulate the results. You can also directly access the command prompt for your computer through the shell by clicking the “terminal” option.</p>
<p>Note that any errors caused by bugs in your code will show up in the shell.</p>
<p>On the upper right hand corner of the screen, you can see the <em>environment</em> you’re working in, which lists all the objects in the shell’s “memory” or <em>namespace.</em> For example, if you download some data in a script and then run the script, the data will show up in the right hand corner of the screen.</p>
<p>On the bottom right hand side is the <em>Viewer.</em> Any plots you generate in R will automatically show up there. Additionally, as we’ll discuss later, documentation of functions and packages will appear in the right hand corner. You can also use it to see the file structure of your working directory and the packages you’re using by clicking “files” or “packages.”&quot;</p>
</div>
<div id="basic-commands" class="section level3">
<h3><span class="header-section-number">0.7.2</span> 3.2 Basic Commands</h3>
<p>Presumably you’re already familiar with R, but you should know a couple of commands specific to RStudio:</p>
<ol style="list-style-type: decimal">
<li>To remove an object from the environment, use the “rm” function as follows:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(remove_this_object)</code></pre></div>
<p>To remove all objects from the environment, you can use</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>To see the documentation of any specific function, you can type</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?function_of_interest</code></pre></div>
<p>In the example below, you’ll find a picture of the documentation for the lm function, which is used for linear modeling.</p>
<div class="figure">
<img src="Images/rstudio3.PNG" alt="How to quickly access documentation" />
<p class="caption">How to quickly access documentation</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li><p>To get RStudio to stop executing some code, you can press the red “stop” button in the top right of the console section. Sometimes this won’t appear, so you can also just hit “escape” keyboard command instead.</p></li>
<li><p>To clear the console, hit Ctrl+L.</p></li>
<li><p>To install packages, you can use the “install.packages(‘packagename’)” command. For example, to install the mosaic package, you could run the following code:</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;mosaic&#39;</span>)</code></pre></div>
<p>A list of useful packages can be found <a href="https://support.rstudio.com/hc/en-us/articles/201057987-Quick-list-of-useful-R-packages">here</a>.</p>
</div>
</div>
<div id="further-readingsources-cited" class="section level2">
<h2><span class="header-section-number">0.8</span> 4. Further Reading/Sources Cited</h2>
<p>To read more about using R, <a href="http://adv-r.had.co.nz/">take a look at the following website, built by Chapman and Hall</a></p>
<p><a href="https://www.rstudio.com/resources/cheatsheets/">This link</a> contains a number of truly fantastic cheat sheets, documenting everything from RStudio itself to data visualization and machine learning.</p>
<p>If you’re not yet sold on RStudio, <a href="https://www.theanalysisfactor.com/the-advantages-of-rstudio/">this page</a> lists some more of RStudio’s advantages.</p>

<p>The previous page in the guide discussed <a href="./rstudioguide.html">RStudio</a>. The next page in the guide discusses <a href="./packagedev.html">Package Structure in R</a>. This page is an introduction to Git and GitHub for beginners. In it, we’ll motivate Git/GitHub, and then discuss what precisely Git/GitHub do and how to use them.</p>
</div>
<div id="why-use-gitgithub" class="section level2">
<h2><span class="header-section-number">0.9</span> 1. Why use Git/GitHub?</h2>
<p>Git and GitHub are actually two different things, and deserve their own sections. Before diving into specifics, however, we should talk about why Git/GitHub exist in the first place. Broadly, Git and GitHub are just tools that developers use to organize their code, which specifically solve three main organizational problems.</p>
<p>First, imagine that two programmers (we’ll refer to them as Carlos and Grace) are working together to build a website that automatically displays polling results from US elections, and suppose Grace modifies a script to change the method for aggregating polling data. It would be tedious for Carlos and Grace to email the script back and forth each time they updated it. Instead, they need a <em>repository</em> where they can update and sync their code to make sure they’re on the same page. GitHub allows programmers to create such repositories.</p>
<p>Second, imagine that farther along in the project, Grace decides that she needs to totally rewrite the code which stores and organizes polling data. Unfortunately, while Grace modifies the system which stores the data, it will be offline, which is unfortunate because Carlos needs to use the data for his work on the project. To avoid this dilemma, Git and GitHub allow programmers to create different versions, called branches, of their code. By branching, Grace can modify the storage system, and in the meantime, Carlos can continue to use the old storage system for his work.</p>
<p>Third, suppose that once Grace and Carlos have finished their website, they want to publish all the statistical functions and tools they built so that other researchers can use those tools to reproduce Grace and Carlos’s research. Putting all of their work on GitHub is probably the quickest and easiest way to make it accessible to other researchers.</p>
<div id="what-is-git" class="section level3">
<h3><span class="header-section-number">0.9.1</span> 1.1 What is Git?</h3>
<div class="figure">
<img src="Images/gitgraphic.PNG" />

</div>
<p>Git is a local version control system. In other words, Git automatically organizes and saves versions of code on your computer, but does not connect to the internet: it’s purely accessible through the command prompt on a computer (there are also other ways to use Git, but it’s generally best to use the command prompt). Git organizes code in two ways.</p>
<p>First, Git sends discrete versions of code to a local database or repository on the computer on which it is installed. To understand this, imagine that Carlos is writing an R script which determines the proper weights for aggregating polling data, and at some point he finishes the first version of the script. At this point, Carlos can send his code to the local repository, in an action called <em>commiting</em> his script. We’ll discuss how to do this later, but note that scripts are not automatically committed to the repository. If Carlos deleted all the code in the script and saved it, he could still access the script by going into the repository. Moreover, the repository also stores all of the previous versions of code, and can backtrack through the various commits, so if Carlos decides the version of the script he built last year worked better, he can use Git to access it.</p>
<p>Second, Git can create branches, or separate versions of code, on the computer it’s installed to. Remember how Grace wanted to revamp the storage system for polling data without preventing Carlos from accessing the old storage system? Using Git, Grace should create a new <em>branch</em> in the repository. For most practical purposes, each branch exists as a separate version of the entire polling project in the Git repository, allowing Grace to modify and experiment without compromising the functionality of the <em>master</em> or original branch.</p>
<p>While she’s working, Grace can use Git to move back and forth between the branches. Then, when she finishes designing and testing the new storage system, she can <em>merge</em> the two branches together, and Carlos’s scripts will automatically start using the new storage system.</p>
</div>
<div id="what-is-github" class="section level3">
<h3><span class="header-section-number">0.9.2</span> 1.2 What is GitHub?</h3>
<p>Where Git creates <em>local</em> repositories on an individual computer, GitHub allows programmers to create <em>remote</em> repositories, stored online, for their code. This is pretty simple concept, but it’s extroardinarily useful. It means that when Grace finishes updating a series of scripts, she can simply <em>push</em> (push means send) them to GitHub, and then Carlos can in one command <em>pull</em> (download) the modified versions onto his computer to work with them. GitHub provides other important tools, but we will not discuss those until later.</p>
</div>
</div>
<div id="setting-up-gitgithub" class="section level2">
<h2><span class="header-section-number">0.10</span> 2. Setting up Git/GitHub</h2>
<div id="making-a-github-account" class="section level3">
<h3><span class="header-section-number">0.10.1</span> 2.1 Making a GitHub account</h3>
<p>Signing up for a GitHub is fairly simple - just go to GitHub.com, click “sign up” in the upper right hand corner, and follow the instructions. We recommend, at least to begin with, getting a free version of GitHub.</p>
</div>
<div id="how-to-install-and-set-up-git" class="section level3">
<h3><span class="header-section-number">0.10.2</span> 2.2 How to Install and Set Up Git</h3>
<p>Because Git is a form of <em>local</em> source control, it does require installation. To install Git onto your computer, go to one of the following sites:</p>
<ul>
<li><p>For Linux: Head to <a href="https://git-scm.com/download/linux" class="uri">https://git-scm.com/download/linux</a> and follow the instructions.</p></li>
<li><p>For Windows: Go to <a href="https://git-scm.com/download/win" class="uri">https://git-scm.com/download/win</a> and the download should automatically start.</p></li>
<li><p>For Mac: Click on <a href="https://git-scm.com/download/mac" class="uri">https://git-scm.com/download/mac</a> and the download should automatically start.</p></li>
</ul>
<p>If you are running Windows/Mac and the websites above download an installer, simply follow the instructions from the installer - it’s fine to just use default settings.</p>
<p>Before you can start using Git, you do have to do a one time set up. Git is built to track and organize old versions of code, so it will need you to set your username and email before it will let you start modifying programs. To set your username and email after installing, open the command line on your computer and type the following commands into it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git config <span class="op">--</span>global user.name <span class="st">&quot;Your Name&quot;</span>
<span class="op">$</span><span class="st"> </span>git config <span class="op">--</span>global user.email <span class="st">&quot;youremail@email.com&quot;</span></code></pre></div>
<p>You might not get explicit confirmation from the command line - for example, when I set the username/email, I see the image below - but don’t worry, Git has still received the message.</p>
<div class="figure">
<img src="Images/configglobals.PNG" />

</div>
<p>Now you’re ready to start using Git/GitHub!</p>
</div>
</div>
<div id="starting-to-use-gitgithub" class="section level2">
<h2><span class="header-section-number">0.11</span> 3. Starting to use Git/GitHub</h2>
<div id="creating-projects-and-repositories" class="section level3">
<h3><span class="header-section-number">0.11.1</span> 3.1 Creating Projects and Repositories</h3>
<p>The first step to using git is creating a project, or repository (repo for short). There are generally two ways to create a repo in Git.</p>
<div id="method-1-start-your-project-on-github" class="section level5">
<h5><span class="header-section-number">0.11.1.0.1</span> Method 1: Start your project on GitHub</h5>
<p>The first way to start a repo is by creating it on GitHub. To do so, log into your GitHub account. Look near the top-right for your profile icon, click it, and click “Your Profile.” Then you should see “Repositories” in the top tab, and then click the green “New” button on the right.</p>
<div class="figure">
<img src="Images/gitdashboard.PNG" />

</div>
<p>GitHub will prompt you to choose a repository name and description of the repo, which you should enter, and will also ask you whether you’d like to initialize the repository with a README. You should generally add README and .gitignore files, although we’ll discuss their functions and importance later. For now, just add the README.</p>
<p>Once you’ve created the repository on GitHub, the next step is to link it with a local Git repository. To do this, open the <em>command prompt</em> on your computer. You’ll need to enter a couple of commands to get the repo set up on your computer.</p>
<p>First, you’ll need to set the <em>working directory</em> in the command prompt. The working directory is the location where Git and command prompt will execute all of your commands - ie. if you tell Git to create a new file, the new file will be located your working directory. Thus, before you download your repository, you’ll want to navigate to the folder in which you want the repository to be located. For example, Carlos might want to put a repo in his “R” folder inside the “Documents” folder on his computer. To do this, he’d use the ‘cd’ command, which stands for “change directory,” and then copy and paste the path of the folder he’d like to place the repository in. An example is given below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>cd C<span class="op">:</span><span class="er">/</span>Users<span class="op">/</span>Carlos<span class="op">/</span>Documents<span class="op">/</span>R</code></pre></div>
<p>Next, you will need to tell git to download, or <em>clone</em>, the repo. You can do this using the “git clone” command, which allows you to download and sync a repository <em>for the first time.</em> This will download the repo, with all its contents, onto your computer and automatically set up a local version of the repo. See an example of the command below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git clone https<span class="op">:</span><span class="er">//</span>GitHub.com<span class="op">/</span>Carlos_Account<span class="op">/</span>repository_name<span class="op">/</span></code></pre></div>
</div>
<div id="method-2-git-init" class="section level5">
<h5><span class="header-section-number">0.11.1.0.2</span> Method 2: Git init</h5>
<p>You can also initialize repos through Git and then upload them to GitHub. To do this, first create a folder where you’d like the repo to be located. Then, open the command line, and like before, navigate to the folder using the ‘cd’ command. Once you’ve navigated there, you can initialize the repo locally by typing “git init”&quot;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>cd C<span class="op">:</span><span class="er">/</span>Users<span class="op">/</span>Carlos<span class="op">/</span>Documents<span class="op">/</span>R<span class="op">/</span>repository_name
<span class="op">$</span><span class="st"> </span>git init</code></pre></div>
<p>This sets up a local repository! We’ll go over how to link a local repository set up this way to GitHub in the next section.</p>
</div>
</div>
<div id="modifying-projects" class="section level3">
<h3><span class="header-section-number">0.11.2</span> 3.2 Modifying Projects</h3>
<p>Say you have created some code in your project directory and want to add it to the repository. To do this, you need to use three commands: <em>git add</em>, <em>git commit</em>, and <em>git push.</em> Note that sending scripts to the local repository is (perhaps counterintuitively) known as <em>commiting</em> them, not adding them.</p>
<p>First, you need to <em>add</em> scripts to Git (adding scripts doesn’t add them to the repository - rather, it just lets Git know that you will eventually <em>commit</em> or send them to the repository). To do this, navigate to the correct working directory and type ‘git add [your script’s filepath]’ to the directory. You can add multiple files in a row with no problem.</p>
<p>Second, you need to <em>commit</em> scripts, which means actually sending them to the local repository. To do this, simply type <em>git commit</em> to the command line after you’ve added all the scripts you want to send to the repository. Git will open a text editor and prompt you to add a message to explain what the commit is for - type in your desired message, then hit “escape” to leave the text editor, and type “:wq” to save and exit the message interface. Once you’ve committed files, all of the files you’ve previously added will be saved on your local repository.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>cd C<span class="op">:</span><span class="er">/</span>Users<span class="op">/</span>Carlos<span class="op">/</span>Documents<span class="op">/</span>R<span class="op">/</span>repository_name
<span class="op">$</span><span class="st"> </span>git add <span class="st">&#39;scriptname.R&#39;</span>
<span class="op">$</span><span class="st"> </span>git add <span class="st">&#39;scriptname2.R&#39;</span>
<span class="op">$</span><span class="st"> </span>git commit</code></pre></div>
<p>The following command line code produces something like this:</p>
<div class="figure">
<img src="Images/committing1.PNG" />

</div>
<p>Depending on the OS you’re running (and perhaps the IDE), you might also be able to add your comment directly into the command line, which is a bit easier. You can do this by typing “commit -m” followed by your message in quotes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>cd C<span class="op">:</span><span class="er">/</span>Users<span class="op">/</span>Carlos<span class="op">/</span>Documents<span class="op">/</span>R<span class="op">/</span>repository_name
<span class="op">$</span><span class="st"> </span>git add <span class="st">&#39;scriptname.R&#39;</span>
<span class="op">$</span><span class="st"> </span>git add <span class="st">&#39;scriptname2.R&#39;</span>
<span class="op">$</span><span class="st"> </span>git commit <span class="op">-</span>m <span class="st">&quot;Fixed small bug&quot;</span></code></pre></div>
<p>Lastly, you need to <em>push</em> the files, which means sending them to GitHub online. Before you do this, if you created the repository locally and have not already done so, you’ll need to specify to Git the url to send the commits to. To do this, type ‘git remote add origin [your url]’ into your command line. Then, you can <em>push</em> the file by writing ‘git push -u origin master,’ which will send the file to the GitHub repo.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git remote add origin https<span class="op">:</span><span class="er">//</span>GitHub.com<span class="op">/</span>user_name<span class="op">/</span>repository_name
<span class="op">$</span><span class="st"> </span>git push <span class="op">-</span>u origin master</code></pre></div>
</div>
<div id="accessing-older-versions-of-code" class="section level3">
<h3><span class="header-section-number">0.11.3</span> 3.3 Accessing older versions of code</h3>
<p>You should never be scared of Git/GitHub, because they only add information - they almost never delete it. In practice, this means that if you commit horrible changes to your code, you can easily revert to a previous version. For example, let’s say Grace wrote some new functions for a script, deleted them and committed the deletes later on, but now wants the functions back. She can easily access the older script using Git. First, she should use the “git log” command to see what commits have been made recently.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git log</code></pre></div>
<p>This command might give an output like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">commit 06c347sa (HEAD -&gt;<span class="st"> </span>master, origin<span class="op">/</span>master, origin<span class="op">/</span>HEAD)
Author<span class="op">:</span><span class="st"> </span>Grace Smith <span class="op">&lt;</span>gracesmith<span class="op">@</span>gmail.com<span class="op">&gt;</span>
Date<span class="op">:</span><span class="st">   </span>Sun Feb <span class="dv">18</span> <span class="dv">23</span><span class="op">:</span><span class="dv">13</span><span class="op">:</span><span class="dv">32</span> <span class="dv">2018</span> <span class="op">-</span><span class="dv">0500</span>

    Remove storage functions

commit b69a14b
Author<span class="op">:</span><span class="st"> </span>Grace Smith <span class="op">&lt;</span>gracesmith<span class="op">@</span>gmail.com<span class="op">&gt;</span>
Date<span class="op">:</span><span class="st">   </span>Sat Feb <span class="dv">17</span> <span class="dv">23</span><span class="op">:</span><span class="dv">11</span><span class="op">:</span><span class="dv">28</span> <span class="dv">2018</span> <span class="op">-</span><span class="dv">0500</span>

    Add storage functions

commit 8a237d1
Author<span class="op">:</span><span class="st"> </span>Grace Smith <span class="op">&lt;</span>gracesmith<span class="op">@</span>gmail.com<span class="op">&gt;</span>
Date<span class="op">:</span><span class="st">   </span>Fri Feb <span class="dv">16</span> <span class="dv">21</span><span class="op">:</span><span class="dv">28</span><span class="op">:</span><span class="dv">46</span> <span class="dv">2018</span> <span class="op">-</span><span class="dv">0500</span>

    Initial commit</code></pre></div>
<p>Clearly, Grace should restore the second commit listed, named ‘b69a14b,’ in order to access the functions she deleted. To do so, Grace can use the “git reset” command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git reset <span class="op">--</span>soft b69a14b</code></pre></div>
<p>This will update the current version of the script to the b69a14b version, which Grace can then inspect and test until she’s ready to commit it to Git/GitHub. Note that there is alos a “git reset –hard” option, which works the same way, but is a pretty serious action to take because it will effectively delete all the commits prior to the version being restored. The soft option is almost always a better choice.</p>
</div>
<div id="the-.gitignore-file" class="section level3">
<h3><span class="header-section-number">0.11.4</span> 3.4 The .gitignore file</h3>
<p>There’s one more thing you should know about adding/modifying files that will make your life a lot easier. Sometimes, when modifying and commiting projects, you won’t want to type out every individual file you’ve modified: you’ll instead want to use the “git add .” command which will simply queue every modified file to be committed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git add .
<span class="op">$</span><span class="st"> </span>git commit <span class="op">-</span>m <span class="st">&#39;Message here&#39;</span>
<span class="op">$</span><span class="st"> </span>git push</code></pre></div>
<p>However, often, you’ll have files in your directory which you do not want to commit or push to GitHub because they’ll clutter up the directory. For example, R directories create “.RHistory” and “.RData” files which will save your history and working environment. These are useful perhaps when writing code, but you don’t want them taking up space in your final packaged product.</p>
<p>To solve this problem, you can use a <em>.gitignore file.</em> A .gitignore file tells Git to ignore certain kinds of files when you write ‘git add .’. For example, gitignore files are frequently configured to tell git to ignore csv files, .RData files, installer logs, and more.</p>
<p>Let’s discuss how <em>.gitignore</em> files actually work. A .gitignore file is really just a glorified text file. However, its filename should be just ‘.gitignore’, because that’s how Git recognizes it - then, if you put a file titled ‘.gitignore’ in a directory you’re working on, Git will use the .gitignore file to decide what to ignore in that specific directory. For example, if Grace is working on a project in ‘C:/Users/gracesmith/Documents/R/repo_name’, she should create a ‘.gitignore’ file inside that folder.</p>
<p>This still leaves an important question - how does Git use the .gitignore file to which files to ignore? Essentially, .gitignore files are just a bunch of independent lines of text, and each line tells git another specific pattern of filepath to ignore. For example, consider the following example of a .gitignore file:</p>
<div class="figure">
<img src="Images/gitignore3.PNG" />

</div>
<p>Each line beginning with a ‘#’ is just a comment explaining the function of that part of the .gitignore file. However, there are a couple basic syntactical rules you need to understand.</p>
<ol style="list-style-type: decimal">
<li><p>If you write ‘.filetype’, then all files which end with ‘.filetype’ will be ignored by git. For example, the third line in the above example reads .RHistory,&quot; so all files with a ‘.RHistory’ in the file name (even if the files are in subdirectories) will be ignored.</p></li>
<li><p>If you write ‘string,’ then everything in the directory which contains that ‘string’ in it will be ignored. For example, if Grace wrote ‘dog’ in her .gitignore, then git would ignore both a file called ‘dog.csv’ and every file in a subdirectory called “dog”.</p></li>
<li><p>If you prepend a pattern with an asterisk *, then the asterisk * serves as a wildcard which can match 0 or more characters. For example, if I write “*car“, then git will ignore the file”mycar.R“.</p></li>
<li><p>If you prepend a pattern with a forward slash ‘/’, then git will only ignore files which match that pattern in the parent (root) directory. For example, I might write ‘/.csv’ in my gitignore file. This would cause git to ignore a file with the path “dog.csv”, but it would not ignore a file called “data/dog.csv.”</p></li>
<li><p>If you prepend a pattern with an exclamation mark, git will <em>not</em> ignore that pattern. For example, if Grace really wanted to make sure her pictures of her dog were pushed to Git, she might write ‘!dog.PNG’ to ensure git did not ignore that picture.</p></li>
</ol>
<p>The rules can seem confusing at times, but it’s hard to go wrong - usually, there are at least 10 ways to ignore any given file you want to ignore. Moreover, if you’re still confused, you might visit Atlassian, which has a wonderful table of all of the various syntactical tricks you can use in your own gitignores, linked <a href="https://www.atlassian.com/git/tutorials/gitignore">here</a>.</p>
<p>Lastly (and most importantly), to save you time, the wonderful <a href="https://www.iq.harvard.edu/people/nalette-brodnax">NaLette Brodnax</a> has created a template .gitignore file which you can use to declutter your GitHub repos. Using it requires three steps:</p>
<p>Step 1: Download the file “template.gitignore” from <a href=".\template.gitignore">here</a>. It should look something like this when you open it:</p>
<div class="figure">
<img src="Images/gitignore.PNG" />

</div>
<p>Step 2: Manually move the template file from your downloads folder to the directory of interest. For example, if Grace is working on a project in ‘C:/Users/gracesmith/Documents/R/repo_name’, she should copy the template into that folder.</p>
<p>Step 3: Right click on the ‘template.gitignore’ file in the folder and delete the ‘template’ part of the name, so that the file name is just ‘.gitignore’. This will help git recognize that your .gitignore file is in fact a .gitignore file. Your operating system might protest at this - Windows in particular freaks out at ‘.gitignore’ files, which is why we initially named the template ‘templates.gitignore’ instead of just ‘.gitignore’. However, once the .gitignore file is in the correct directory, it’s safe to change the path. Your end result should look something like this:</p>
<div class="figure">
<img src="Images/gitignore2.PNG" alt="A .gitignore file" />
<p class="caption">A .gitignore file</p>
</div>
<p>It has no name, but it will serve its intended purpose.</p>
<p>If you decide to create your own .gitignore file, you can follow very similar steps.</p>
<ol style="list-style-type: decimal">
<li><p>Go into the directory you want and create a blank text file called ‘template.gitignore’. It’s necessary at first to keep the ‘template’ part because otherwise some operating systems will not let you create the file.</p></li>
<li><p>Right click on the file, rename it and delete the ‘template’ part so the filename is just ‘.gitignore.’</p></li>
<li><p>Start writing your gitignore file!</p></li>
</ol>
<p>.gitignore files aren’t glamerous, but they really are important - nobody wants to work with cluttered repositories.</p>
</div>
<div id="branching" class="section level3">
<h3><span class="header-section-number">0.11.5</span> 3.4 Branching</h3>
<div class="figure">
<img src="Images/branchinggraphic.PNG" />

</div>
<p>As we discussed earlier, branches allow you to modify scripts while simaltaneous keeping the old versions easily accessible. In practice, the way this works is that the branch you select in git changes the way that scripts you open using explorer/finder appear. For example, if Carlos has the following script as the master (default) branch in Git, the script might look something like this when he opens it on his computer:</p>
<div class="figure">
<img src="Images/hello1.PNG" alt="Master Branch of the Hello World Script" />
<p class="caption"><em>Master Branch of the Hello World Script</em></p>
</div>
<p>However, if he uses Git to switch to a test branch, he might open the exact same file using his file explorer and see the following:</p>
<div class="figure">
<img src="Images/hello2.PNG" alt="Test Branch of the Hello World Script" />
<p class="caption"><em>Test Branch of the Hello World Script</em></p>
</div>
<p>Let’s discuss how to actually use git to branch.</p>
<div id="creating-and-switching-branches" class="section level5">
<h5><span class="header-section-number">0.11.5.0.1</span> Creating and Switching Branches</h5>
<p>To create a branch, use the “git checkout” command followed with a “-b” and the name of the branch:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git checkout <span class="op">-</span>b branch_name</code></pre></div>
<p>This will create a new branch which is identical to the initial (master) branch. You can modify it as you like, and you will still be able to easily access the initial (master) branch. To do this, simply use the “git checkout” command without the “-b” and type the name of the branch you want to switch to:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git checkout switch_to_this_branch</code></pre></div>
<p>Remember, switching to a branch will change the way the file shows up once you open it from your computer.</p>
</div>
<div id="merging-branches" class="section level5">
<h5><span class="header-section-number">0.11.5.0.2</span> Merging Branches</h5>
<p>Suppose you have created a test branch, tested it to make sure it works, and now want to combine it with the original master branch. To do this, use the “git checkout” command in combination with the “git merge” command as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">$</span><span class="st"> </span>git checkout master
<span class="op">$</span><span class="st"> </span>git merge test_branch_name</code></pre></div>
<p>These two commands will merge the test branch into the master branch, meaning that the master branch at the end of the merging will look like the test branch.</p>
</div>
</div>
<div id="conflicts" class="section level3">
<h3><span class="header-section-number">0.11.6</span> 3.5 Conflicts</h3>
<p>Sometimes, however, Git will be unable to push or pull branches because it is getting conflicting information from two users. For example, suppose Grace has written the following function, which calculates the squared error between two values:</p>
<div class="figure">
<img src="Images/loss0.PNG" alt="Original Version of Loss Script" />
<p class="caption"><em>Original Version of Loss Script</em></p>
</div>
<p>This function clearly has a bug in it, because it claims to return the squared error, but instead, it returns the absolute value of the error. Carlos notices this, and modifies the function so that it accurately reports that it calculates the absolute value, and pushes his modified version to GitHub:</p>
<div class="figure">
<img src="Images/lossCarlos.PNG" alt="Carlos’s Pushed Version of Loss Script" />
<p class="caption"><em>Carlos’s Pushed Version of Loss Script</em></p>
</div>
<p>But before Grace realizes Carlos has modified the script, she also fixes the bug, but instead by changing the absolute value to a squaring function:</p>
<div class="figure">
<img src="Images/lossGrace.PNG" alt="Grace’s Modified Version of Loss Script" />
<p class="caption"><em>Grace’s Modified Version of Loss Script</em></p>
</div>
<p>Git is smart, so when Grace tries to push her version to GitHub, Git will recognize that the two versions of the script conflict. As a result, it will throw the following error:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">C<span class="op">:</span>\Users\gracesmith\Documents\R\repo_name<span class="op">&gt;</span>git push
To https<span class="op">:</span><span class="er">//</span>GitHub.com<span class="op">/</span>gracesmith<span class="op">/</span>repo_name
 <span class="op">!</span><span class="st"> </span>[rejected]        master -&gt;<span class="st"> </span><span class="kw">master</span> (fetch first)
error<span class="op">:</span><span class="st"> </span>failed to push some refs to <span class="st">&#39;https://GitHub.com/gracesmith/repo_name&#39;</span>
hint<span class="op">:</span><span class="st"> </span>Updates were rejected because the remote contains work that you do
hint<span class="op">:</span><span class="st"> </span>not have locally. This is usually caused by another repository pushing
hint<span class="op">:</span><span class="st"> </span>to the same ref. You may want to first integrate the remote changes
hint<span class="op">:</span><span class="st"> </span>(e.g., <span class="st">&#39;git pull ...&#39;</span>) before pushing again.
hint<span class="op">:</span><span class="st"> </span>See the <span class="st">&#39;Note about fast-forwards&#39;</span> <span class="cf">in</span> <span class="st">&#39;git push --help&#39;</span> <span class="cf">for</span> details.</code></pre></div>
<p>Effectively, Git recognizes that Carlos has made modifications to the script which were pushed to GitHub that Grace doesn’t have. This usually happens <em>when two programmers modify exactly the same line in the single script</em>, such as line 6 in the above examples. To solve this problem, Grace should follow Git’s advice, and try the “git pull” command. This will lead to the following message from git:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">C<span class="op">:</span>\Users\gracesmith\Documents\R\repo_name<span class="op">&gt;</span>git pull
remote<span class="op">:</span><span class="st"> </span>Counting objects<span class="op">:</span><span class="st"> </span><span class="dv">3</span>, done.
remote<span class="op">:</span><span class="st"> </span>Compressing objects<span class="op">:</span><span class="st"> </span><span class="dv">100</span>% (<span class="dv">3</span><span class="op">/</span><span class="dv">3</span>), done.
remote<span class="op">:</span><span class="st"> </span>Total <span class="dv">3</span> (delta <span class="dv">1</span>), reused <span class="dv">0</span> (delta <span class="dv">0</span>), pack<span class="op">-</span>reused <span class="dv">0</span>
Unpacking objects<span class="op">:</span><span class="st"> </span><span class="dv">100</span>% (<span class="dv">3</span><span class="op">/</span><span class="dv">3</span>), done.
From https<span class="op">:</span><span class="er">//</span>GitHub.com<span class="op">/</span>gracesmith<span class="op">/</span>repo_name
   e719863..59fc0ba  master     -&gt;<span class="st"> </span>origin<span class="op">/</span>master
Auto<span class="op">-</span>merging scriptname.R
<span class="kw">CONFLICT</span> (content)<span class="op">:</span><span class="st"> </span>Merge conflict <span class="cf">in</span> scriptname.R
Automatic merge failed; fix conflicts and then commit the result.</code></pre></div>
<p>Again, Git is letting Grace know that it sees there’s a conflict and that Git needs human help to fix it. Once Grace has pulled Carlos’s changes, she can go open the script in her computer and should see something like the following:</p>
<div class="figure">
<img src="Images/lossConflict.PNG" alt="Conflicted Version of Loss Script" />
<p class="caption"><em>Conflicted Version of Loss Script</em></p>
</div>
<p>The “&lt;&lt;&lt;&lt;” and “&gt;&gt;&gt;&gt;” lines are in the script to signal the beginning and end of a merge conflict, whereas the “===” line separates the two different versions. On the top is Grace’s version and on the bottom is Carlos’s. To resolve the merge conflict, Grace should manually select the two lines she prefers and then delete all of the “&lt;, =, &gt;” symbols to let Git know that the conflict has been resolved. Then, she can commit and push the file to Git, and she’ll be good to go!</p>
<p>Overall: merge conflicts are rather annoying and can be confusing, so the best way to avoid them is to clearly deliniate which programmers will be working on which sections of which scripts. This will prevent Git (and you) from getting confused.</p>
</div>
<div id="tips-and-tricks" class="section level3">
<h3><span class="header-section-number">0.11.7</span> 3.6 Tips and Tricks</h3>
<p>Git can be confusing, but there are three general rules of thumb you can follow to figure out any bugs that come up.</p>
<ol style="list-style-type: decimal">
<li><p>Git is super smart. If there’s a bug and Git is recommending a particular way of fixing it, there’s a very high chance that Git is right.</p></li>
<li><p>Use the git status command. After entering git status, Git will give you a rundown of the status of the entire repository.</p></li>
<li><p>If that doesn’t work (or you don’t understand what is going on), you can always copy and paste the error from the command line into Google and reference stackexchange. There is a wealth of online help!</p></li>
</ol>
<p>Try not to worry too much! Git almost exclusively <em>adds information</em>, meaning that you can always just go back and restore a previous version - you’ll never lose your work.</p>
</div>
<div id="cheat-sheats" class="section level3">
<h3><span class="header-section-number">0.11.8</span> 3.7 Cheat sheats</h3>
<p>Lastly, there are a couple of cheat sheets that you can use to make your life easier.</p>
<ul>
<li><p><a href="http://kbroman.org/GitHub_tutorial/pages/init.html">Karl Broman’s tutorial</a> runs you through initializing a repository</p></li>
<li><p><a href="https://services.GitHub.com/on-demand/downloads/GitHub-git-cheat-sheet.pdf">This official GitHub cheat sheet</a> lists all of the general commands you’ll need</p></li>
</ul>
</div>
</div>
<div id="further-reading" class="section level2">
<h2><span class="header-section-number">0.12</span> 4. Further reading</h2>
<p>If you’re interested in learning more about Git and GitHub, you might want to take a look at the following resources:</p>
<ul>
<li><p>The Software Carpentry Foundation has a great mid level Git tutorial <a href="https://swcarpentry.GitHub.io/git-novice/">here</a></p></li>
<li><p>Atlassian has some wonderful advanced Git tutorials <a href="https://www.atlassian.com/git/tutorials/advanced-overview">here</a></p></li>
</ul>
</div>
<div id="sources-cited" class="section level2">
<h2><span class="header-section-number">0.13</span> 5. Sources cited</h2>
<p>We used <a href="http://kbroman.org/GitHub_tutorial/pages/init.html">Karl Broma’s Book</a>, a <a href="https://www.git-tower.com/learn/git/faq/restore-repo-to-previous-revision">Git-Tower post</a>, and the GitHub documentation <a href="https://git-scm.com/book/en/v2/Getting-Started-Git-Basics">here</a> and <a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">here</a> to help write this guide.</p>

<p>The previous page in the guide discussed <a href="./githubguide.html">GitHub</a>. The next page in the guide will discuss <a href="./testingguide.html">testing packages</a>. This page will walk you through the structure, motivation, and process of building packages in R. We’d like to extend a huge thank you to Hadley Wickham’s book <a href="http://r-pkgs.had.co.nz/r.html#r">R packages</a>; this part of the guide is basically a significantly condensed and simplified version of that book. A huge portion of the credit should go to him.</p>
<p>A quick reminder for readers who do not want to use RStudio: this part of the guide relies on the devtools package, so if you can’t use RStudio, it’s worth following along by looking at the <a href="https://www.rdocumentation.org/packages/devtools/versions/1.13.3/source">source code</a> and <a href="https://www.rdocumentation.org/packages/devtools/versions/1.13.3">documentation</a> for devtools.</p>
<p>Lastly, you can find the ‘devex’ example package linked <a href="https://github.com/amspector100/packageguidelines/tree/master/devex">here, on GitHub</a>, if you’d like to look through it while reading the guide.</p>
</div>
<div id="motivation" class="section level2">
<h2><span class="header-section-number">0.14</span> 1. Motivation</h2>
<p>Imagine Grace has built an architecture for aggregating polling data, and you would like to use it in your own research project. So you go to GitHub and you download Grace’s repository, hoping to build on her research. One of the scripts you download looks like this.</p>
<div class="figure">
<img src="Images/badexample.PNG" alt="This is not what packages should look like" />
<p class="caption"><em>This is not what packages should look like</em></p>
</div>
<p>When you read this script, you should notice at least a couple of problems.</p>
<p>First, upon reading this code, most programmers would have absolutely no idea what it’s supposed to do. Because this is a simple example, you might be able to guess that the lm function returns the squared difference of its inputs, and the sqt function takes the square root of negative numbers. But the “scalep” function is almost totally incomprehensible - what’s it supposed to do?</p>
<p>Second, even if you could tell what the “scalep” function does, you’d have no idea how to use it, because you don’t know how the “d” input should be structured.</p>
<p>Third, it’s very difficult to use this script in combination with other packages. The “lm” function has the same name as the “lm” function from the R Stats package, which is incredibly useful, and very commonly used. Giving a new function the same name as a base or commonly used function will create extremely weird bugs or just cause a fatal error and end your entire session.</p>
<p>Lastly, and less obviously, you don’t know what <em>version</em> of Grace’s package this script is. Grace will probably update and modify her scripts over time, and unless you are aware of the contents of those changes, the script may behave differently than you expect.</p>
<p>Yet never fear - packages don’t need to be this way! Most packages are extremely well-built and easy to use. In this section, we’ll demonstrate how to make sure your packages are like those packages.</p>
</div>
<div id="solutions" class="section level2">
<h2><span class="header-section-number">0.15</span> 2. Solutions</h2>
<p>In this section, we’ll discuss the solutions to the problems outlined above. For each problem, we’ll discuss the conceptual solution, and then we’ll describe how the structure of R Packages allows users to integrate those solutions. Note that this section mostly just outlines package structure - we won’t talk about actually creating things like documentation until the next couple sections.</p>
<div id="code-style" class="section level3">
<h3><span class="header-section-number">0.15.1</span> 2.1 Code Style</h3>
<p>The first solution is to write code differently. The script above has a couple problems with style. Specifically, note the difference between the following two code samples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sqt &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="cf">if</span>(x<span class="op">==</span><span class="dv">0</span>){<span class="kw">return</span>(x)}
  <span class="cf">else</span> <span class="cf">if</span>(x<span class="op">&gt;</span><span class="dv">0</span>){<span class="kw">return</span>(<span class="kw">sqrt</span>(x))}
  <span class="cf">else</span> <span class="cf">if</span>(x<span class="op">&lt;</span><span class="dv">0</span>){<span class="kw">return</span>(<span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="op">-</span>x)))}
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This function takes the complex square root of real numbers</span>

general_sqrt &lt;-<span class="st"> </span><span class="cf">function</span> (x) {
  
  <span class="co"># Return the normal square root if x &gt; 0</span>
  <span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">||</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {
    <span class="kw">return</span>(<span class="kw">sqrt</span>(x))
  } 
  
  <span class="co"># Else return the complex square root</span>

  <span class="cf">else</span> {
    <span class="kw">return</span>(<span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="op">-</span>x)))
  } 
  
}</code></pre></div>
<p>Clearly, the second example is a lot more readable and a lot easier to understand. Later, we’ll talk about specific coding guidelines, but for now, just remember that the goal of programming style guides is to make your code <em>readable</em> and therefore <em>useable</em>. This will also make it a lot easier for others to fix and find bugs in your packaged code.</p>
</div>
<div id="documentation" class="section level3">
<h3><span class="header-section-number">0.15.2</span> 2.2 Documentation</h3>
<p>Of course, nobody wants to read through packaged code in order to guess what a function does. Instead, packages also include documentation to tell users how to use different functions and objects developed in the package. For exampe, imagine you typed ‘?scalep’ into the Console and got the following result:</p>
<div class="figure">
<img src="Images/PackageSS/scalepdoc.PNG" alt="Documentation for scalep function" />
<p class="caption"><em>Documentation for scalep function</em></p>
</div>
<p>This documentation tells you what the scalep function does, what kinds of inputs it needs, what kind of output it returns, and gives you examples of how to use it. Documentation makes packages usable, and is suprisingly easy to write using devtools and roxygen2, so it’s a critical part of any package.</p>
</div>
<div id="description" class="section level3">
<h3><span class="header-section-number">0.15.3</span> 2.3 Description</h3>
<p>The DESCRIPTION file of an R Package helps solve each one of the first three problems. It briefly outlines the purpose of the package, as well as the version of the pacakge and who maintains it. Perhaps most importantly for newer users, it also documents the dependencies of your package. For example, if you wrote a package which relies heavily on the boot package version 1.3-20, your description will document that, so your users don’t have to spend hours searching for the exact package necessary to make your package work.</p>
</div>
<div id="namespace" class="section level3">
<h3><span class="header-section-number">0.15.4</span> 2.4 Namespace</h3>
<p>The namespace is a bit more complicated than the other parts of the package structure. The purpose of the namespace is make sure your package works in combination with other packages. For example, if your package includes some data labelled ‘lm’, a good namespace will ensure that using that data in conjunction with the R stats package (which has a function called ‘lm’) will <em>not</em> throw an error. How exactly the namespace does this is a bit complicated and beyond the scope of this guide, so if you’re dying for more specifics, you should <a href="http://r-pkgs.had.co.nz/namespace.html">read through this wonderful page</a>. Thankfully, Roxygen2 will automatically generate a namespace for you - we’ll discuss how to do this a little later.</p>
<p>Remember: the namespace will help your package play nice with others in the event of name conflicts, but it’s still better to name your functions so that the they don’t overlap with names of other commonly used functions if possible.</p>
<p>Now that we’ve gone through the overall structure of packages, we’ll walk you through what Grace <em>should</em> have done - the process of building an R package from start to finish.</p>
</div>
<div id="the-readme" class="section level3">
<h3><span class="header-section-number">0.15.5</span> 2.5 The README</h3>
<p>The README file is a bit different than the others, because your package will actually work fine even if you don’t have one. However, if you want other people to ever use your package, it’s best to have a README. The purpose of a README is basically to bridge the gap between the DESCRIPTION and the actual documentation in your package. In other words, someone using your package might know what it does in a general sense from your DESCRIPTION, but they won’t necessarily know exactly how to set up the package or how to use specific functions. The README takes care of that. In general, READMEs should do at least two things, with a couple of optional ones:</p>
<p>(Important):</p>
<ol style="list-style-type: decimal">
<li>Offer a longer (one to three paragraph) description of the package</li>
<li>Help users install and set up the package</li>
</ol>
<p>(Optional from here on):</p>
<ol start="3" style="list-style-type: decimal">
<li>Tell developers what to do if they want to contribute to your package</li>
<li>Help contributers figure out how to run the packages’ unit tests (we’ll talk more about unit tests in the next section)</li>
<li>Offer some acknowledgements</li>
</ol>
<p>This template linked <a href="https://gist.github.com/PurpleBooth/109311bb0361f32d87a2">here</a> is pretty good. Again, because your package will technicaly function without your README, the actual structure and content of a README can be flexible. However, just remember that if you don’t have a README which outlines why and how to use your package, other developers are unlikely to want to use it.</p>
</div>
</div>
<div id="the-walkthrough" class="section level2">
<h2><span class="header-section-number">0.16</span> 3. The Walkthrough</h2>
<div id="step-3.1-initializing-the-package" class="section level3">
<h3><span class="header-section-number">0.16.1</span> Step 3.1: Initializing the Package</h3>
<p>RStudio makes it easy to create packages. To start, click File&gt;New Project. Then, click “New Directory” when you see the screen below:</p>
<div class="figure">
<img src="Images/PackageSS/createproj1.PNG" />

</div>
<p>Then click “R Package” when you see the screen below:</p>
<div class="figure">
<img src="Images/PackageSS/createproj2.PNG" />

</div>
<p>Lastly, name your package. Your name should be something short and descriptive. Since we’ll be walking through a development example, we’ll title our new package “devex.”</p>
<div class="figure">
<img src="Images/PackageSS/createproj3.PNG" />

</div>
<p>Once you’ve created your package, your RStudio should look something like this. It should come preloaded with a “Hello World” script which includes a handy function that prints “Hello world.”</p>
<div class="figure">
<img src="Images/PackageSS/projectinit.PNG" />

</div>
<p>Everything should look mostly the same as normal except for the “Files” tab on the bottom right, which should include an “.Rproj” file, a “DESCRIPTION” file, a “NAMESPACE” file, and a folder titled “R.” You should start by checking the little boxes next to the “NAMESPACE” file and the “Hello.R” R script inside the R file and clicking “delete” above them, just because we will have Roxygen2 automatically generate the namespace, and because presumably your package doesn’t need a “Hello World” function.</p>
<p>You should also go to “Tools &gt; Project Options” and select the following options, which will help you generate documentation using roxygen2:</p>
<div class="figure">
<img src="Images/PackageSS/userox.PNG" />

</div>
</div>
<div id="step-3.2-modifying-the-description-file" class="section level3">
<h3><span class="header-section-number">0.16.2</span> Step 3.2: Modifying the DESCRIPTION File</h3>
<p>The DESCRIPTION file gives an extremely brief overview to the package. It includes critical information such as the author of the package, the title, a very short summary of its purpose, and the liscensing information. Double click on the “DESCRIPTION” file on in the files section to open and edit the DESCRIPTION tab.</p>
<p>DESCRIPTION is a DCF file. This file format may be unfamiliar to you, but it’s quite simple. Each line contains a a fieldname and value, separated by a colon. Sometimes, values are long enough to require multiple lines, in which case they are indented by four spaces. For example, the DESCRIPTION file for the devex package might look something like this:</p>
<div class="figure">
<img src="Images/PackageSS/description.PNG" />

</div>
<p>Let’s go through the fields and discuss what they mean. The first seven fields listed are mandatory, meaning that if you do not include them, the development environment will throw an error later on when you’re trying to build your package.</p>
<ol style="list-style-type: decimal">
<li><strong>Package</strong>: This is the name of the package. It should match the package name you chose earlier, and you should probably just leave this as is.</li>
<li><strong>Title</strong>: A short but more descriptive title of your package than its name.</li>
<li><strong>Version</strong>: The version of your package. Since you’re creating this package for the first time, presumably it’s version 0.1.0.</li>
<li><strong>Author</strong>: Here, you should add in your name.</li>
<li><strong>Maintainer</strong>: Here, you should add in your name as well as a valid email enclosed in &lt;&gt; brackets. Note that if you do not enter a valid email, the development environment may throw errors later.</li>
<li><strong>Description</strong>: This should be a one-paragraph <em>comprehensive</em> description of the package. It is necessarily a high level-description, but it should be a complete one.</li>
<li><strong>License</strong>: You should add in a License, which describes how others can legally use the package. Most of the time (especially in the US), you should write ‘CC0’ in the License field, which implies that the package is open for all use, and you have relinquished all your rights to it. For more information on various licensing options, click <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file">this link</a>.</li>
</ol>
<p>(Note all of the fields from this point on are optional, but encouraged!)</p>
<ol start="8" style="list-style-type: decimal">
<li><strong>Type</strong>: This describes what type of project you’re creating - in this case, because you’re creating a package, you should write “Package.”</li>
<li><strong>Date</strong>: The date, in YYYY-MM-DD fashion.</li>
<li><strong>LazyData</strong>: Write “true” after LazyData and the colon. Writing ‘true’ ensures that if you include any data with your package (which you frequently will), when another user loads your package, they won’t automatically load up the data, but will only load it if it becomes necessary during their use. This option reduces the amount of RAM users have to expend when loading packages, especially if you are planning to include a lot of data with your package.</li>
<li><strong>Encoding</strong>: Just leave this as “UTF-8”; discussing what encodings are isn’t super important for this guide. If you’re dying to learn about encodings, visit <a href="https://www.w3.org/International/questions/qa-what-is-encoding">this webpage</a>.</li>
<li><strong>RoxygenNote</strong>: Roxygen will automatically fill in the version of Roxygen2 used to build the package in this field.</li>
</ol>
<p>(These fields are exceptionally important if you are building a package using tools from other packages)</p>
<ol start="13" style="list-style-type: decimal">
<li><strong>Imports</strong>: In this field, you should list the packages which your package needs to function. Each package should be indented by two spaces, separated by a comma, and given its own line. For example, a pacakge which requires ggplot2, nlme, and rpart might have an ‘imports’ field which looks like this:</li>
</ol>
<div class="figure">
<img src="Images/PackageSS/imports.PNG" />

</div>
<ol start="14" style="list-style-type: decimal">
<li><strong>Suggests</strong>: Sometimes, your package will not really <em>require</em> the use of other packages, but it might offer a couple of extra wrappers/functions with those other packages. When those extra functions aren’t strictly necessary, it’s a good idea to have your package <em>suggest</em> imports. For example, if Grace modified the scalep function to look like the following code, she might put ggplot2 in the ‘suggests’ part of the description.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">scalep &lt;-<span class="st"> </span><span class="cf">function</span>(d, <span class="dt">x=</span><span class="dv">1</span>){
  ...
  
  <span class="co"># If ggplot2 is available, use its qplot function - else, use the default hist function</span>
  
  <span class="cf">if</span> (<span class="kw">requireNamespace</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)) {
    ggplot2<span class="op">::</span><span class="kw">qplot</span>(r, <span class="dt">geom=</span><span class="st">&#39;histogram&#39;</span>)
  } <span class="cf">else</span> { 
    <span class="kw">hist</span>(r)
  }
  
  ...
  
}</code></pre></div>
<p>Here, the function ‘requireNameSpace’ checks if ‘ggplot2’ is available, and if not, the function uses the (slightly less pretty) default histogram function.</p>
<p>Once you know which packages to list in the ‘suggests’ section, you can list them exactly the same way you’d list functions in the ‘imports’ section: each package is indented by two spaces, separated by a comma, and gets its own line.</p>
<p>In general, it’s best to suggest functions instead of requiring them if you barely use them in your package. This will give users a bit more flexibility, because it won’t force them to download packages they will probably never use.</p>
</div>
<div id="step-3.3-starting-to-program" class="section level3">
<h3><span class="header-section-number">0.16.3</span> Step 3.3: Starting to Program</h3>
<div id="step-3.3.1-general-coding-guidelines" class="section level4">
<h4><span class="header-section-number">0.16.3.1</span> Step 3.3.1: General Coding Guidelines</h4>
<p>All of your code should be in scripts in the ‘R’ file created in the RStudio package development environment, as shown below:</p>
<div class="figure">
<img src="Images/PackageSS/code1.PNG" />

</div>
<p>The coding you will do in package development is slightly different than the coding you’ll normally do when writing R scripts. This is for a couple reasons:</p>
<ol style="list-style-type: decimal">
<li>When you write a script and load that script using source(script_name), the code in the script runs when you load it (specifically, when you run the ‘source’ command). On the other hand, the code in a package is run when the package is <em>built</em> on your computer. As a result, your code should mostly be focused on building functions, as opposed to a series of actions which the computer ought to take.</li>
<li>Unlike your personal scripts, other people will be using your package, and if your package is good, they’ll be using it in ways you didn’t anticipate. This means you ought to really try to make sure your code is as general as possible and can support a variety of approaches and implementations.</li>
<li>Also, because other people will be using your package, you should avoid modifying the global RStudio landscape with your package. This means avoiding using functions like require(), library(), or source(); instead, there are other alternatives which can accomplish the same goal without changing the global environment and potentially giving other users an unwanted surprise. For example, instead of using library() and require(), you should be listing your necessary imports in the DESCRIPTION file, as outlinted above. Consider the bad example listed at the beginning of this section, where you saw something that looked like this:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Functions for later use</span>

<span class="kw">require</span>(ggplot2)

 ...

scalep &lt;-<span class="st"> </span><span class="cf">function</span>(d, <span class="dt">x=</span><span class="dv">1</span>){
 ...
  <span class="kw">qplot</span>(r, <span class="dt">geom=</span><span class="st">&#39;histogram&#39;</span>)
 ...
}</code></pre></div>
<p>This is a bad example, because it uses “require.” Instead, you should be listing your packages’ necessary dependencies in the DESCRIPTION file, and then RStudio will make sure anyone who loads your package also loads the other packages you used to write your package (also, when users install your package, RStudio will also make sure that the other packages necessary are installed for other users too). The one catch is that you’ll now have to append ‘packagename::’ in front of the imported functions you want to use, otherwise RStudio won’t recognize them. Thus, in the previous example, the code should look something like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> ...

scalep &lt;-<span class="st"> </span><span class="cf">function</span>(d, <span class="dt">x=</span><span class="dv">1</span>){
 ...
  ggplot2<span class="op">::</span><span class="kw">qplot</span>(r, <span class="dt">geom=</span><span class="st">&#39;histogram&#39;</span>)
 ...
}</code></pre></div>
<p>The last thing you should know is that if you want your package to plot things, you will have to surround the “plot” commands with a print statement, like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> ...

scalep &lt;-<span class="st"> </span><span class="cf">function</span>(d, <span class="dt">x=</span><span class="dv">1</span>){
 ...
  <span class="kw">print</span>(ggplot2<span class="op">::</span><span class="kw">qplot</span>(r, <span class="dt">geom=</span><span class="st">&#39;histogram&#39;</span>))
 ...
}</code></pre></div>
<p>You should also take care to organize your functions properly. It’s probably a bad idea to stick them all into one script and title it “functions.” Instead, you should organize functions by their purposes - for example, a variety of loss functions might go into a single script. Of course, some very complicated functions might deserve their own script. The file names of the script should be descriptive - for example, a script of loss functions might be named “loss_functions.R”.</p>
</div>
<div id="step-3.3.2-code-style" class="section level4">
<h4><span class="header-section-number">0.16.3.2</span> Step 3.3.2: Code Style</h4>
<p>Now let’s talk about specific elements of code style. These are shortened and adapted from <a href="http://r-pkgs.had.co.nz/r.html">Hadley Wickham’s book on R package development</a>, which in turn were adapted from Google’s R style guide. For more advice on everything from naming variables to curly bracket placement, head to that aforementioned link.</p>
<ol style="list-style-type: decimal">
<li><strong>Comments</strong>: Comments are the best (and easiest) way to make your code readable. In general, you should err on the side of commenting too much rather than too little, and your comments should explain the <em>motivation</em> of your code as opposed to what your code actually does (although admittedly the line between those two things is a bit blurry). Moreover, you can use lines of ‘# —————————’ or ‘# ==================’ to separate distinct sections of your code. Here’s a good, if simple, example of commenting:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This function returns the squared difference element-wise between two vectors</span>

loss &lt;-<span class="st"> </span><span class="cf">function</span>(x,y) {

  error &lt;-<span class="st"> </span>(x<span class="op">-</span>y)<span class="op">**</span><span class="dv">2</span>

  <span class="kw">return</span>(error)
}

<span class="co">#---------------------------------------------------------------------------</span>

<span class="co"># Takes the square root of any real number, returning a complex number</span>

general_sqrt &lt;-<span class="st"> </span><span class="cf">function</span> (x) {

  <span class="co"># Return the normal square root if x &gt; 0</span>
  <span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">||</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {
    <span class="kw">return</span>(<span class="kw">complex</span>(<span class="dt">real=</span><span class="kw">sqrt</span>(x), <span class="dt">imaginary=</span><span class="dv">0</span>))
  }

  <span class="co"># Else return the complex square root</span>

  <span class="cf">else</span> {
    <span class="kw">return</span>(<span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="op">-</span>x)))
  }

}</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><strong>Names</strong>: Naming variables and functions is tricky - names should be descriptive but concise, and variable names should generally be nouns whereas function names tend to be verbs. Moreover, most R developers keep their function/variable names all lowercase and separate multiple words with underscores. There are no strict rules on this, but at the very least it’s nice to be consistent with <em>some</em> rules because it makes your code more readable.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad example - function name</span>
f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  <span class="kw">return</span>(<span class="kw">sqrt</span>(x))
}

<span class="co"># Good example - function name</span>
take_sqrt &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="kw">return</span>(<span class="kw">sqrt</span>(x))
}

<span class="co"># Bad example - variable name</span>
s &lt;-<span class="st"> </span><span class="kw">read.table</span>(path)

<span class="co"># Good example - variable name</span>
car_data &lt;-<span class="st"> </span><span class="kw">read.table</span>(path)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><strong>Spacing</strong>: In general, you should use a lot of spaces, because they make your code a lot more readable! Specifically, you should always surround parenthesis with spaces; the exception is when you’re making a function call. Note that this means you should surround the parenthesis themselves with spaces, but not the objects within the parenthesis, which should <em>not</em> be surrounded with spaces. You should also surround operators (like +, -, &lt;-, =, /, **, others, etc) with spaces; see the examples below.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad examples of parenthesis spacing</span>

<span class="cf">if</span>(a <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)<span class="kw">do</span>(something) <span class="co"># Needs spaces before/after the parenthesis</span>
<span class="cf">if</span> ( a <span class="op">==</span><span class="st"> </span><span class="dv">7</span> ) <span class="co"># Shouldn&#39;t be spaces around &#39;a == 7&#39;</span>
<span class="kw">function_call</span> (parameter) <span class="co"># Shouldn&#39;t be a space between function_call and (parameter)</span>

<span class="co"># Good example of parenthesis spacing</span>

<span class="cf">if</span> (a <span class="op">==</span><span class="st"> </span><span class="dv">7</span>) <span class="kw">do</span>(something)
<span class="kw">function_call</span>(parameter)

<span class="co"># Bad example of operator spacing</span>

a&lt;-a<span class="op">+</span><span class="dv">3</span> <span class="co"># Needs spaces </span>

<span class="co"># Good example of operator spacing</span>

a &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li><strong>Curly Braces</strong>: You should start a new line after you write an opening curly brace, and ending curly braces should get their own lines, unless you have an else clause.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad examples</span>

<span class="cf">if</span> (condition) {
  <span class="kw">do</span> (x)} <span class="co"># Ending curly brace should get a new line</span>

<span class="cf">if</span> (condition) { <span class="kw">do</span>(x) }

<span class="cf">if</span> (condition) {
  <span class="kw">do</span>(x)
}         <span class="co"># The else should be on this line</span>
<span class="cf">else</span> {
<span class="kw">do</span>(y)   <span class="co"># This line should be indented with two spaces</span>
}


<span class="co"># Good examples</span>

<span class="cf">if</span> (condition) {
  <span class="kw">do</span>(x)
} <span class="cf">else</span> {
  <span class="kw">do</span>(y)
}</code></pre></div>
<p>As always, you can break the rules if you have a good reason to. For example, the extra indentation in the following example helps maintain alignment and increases the readability of the code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Exception which proves the rule - the alignment improves readability</span>
my_function =<span class="st"> </span><span class="cf">function</span>(<span class="dt">argument_1 =</span> <span class="st">&#39;this string is extremely long&#39;</span>,
                       <span class="dt">argument_2 =</span> <span class="st">&#39;this string is even longer somehow&#39;</span>,
                       <span class="dt">argument_3 =</span> <span class="st">&#39;this string is also pretty long&#39;</span>) {
  
}</code></pre></div>
<p>Overall, different organizations and programmers have different styles and guidelines for specific coding style. Some programming guides might require you to avoid <a href="http://wiki.c2.com/?CamelCase">camelCase</a>; others might mandate its use. We’ve tried to document some pretty broadly accepted norms, but in general, you should remember:</p>
<ol style="list-style-type: decimal">
<li>Your goal should always be to make your code readable!</li>
<li>Whatever style guide you follow, follow it <em>consistently</em> to make your code readable</li>
<li>You should generally adapt to follow the conventions of the organization you’re working under/for</li>
</ol>
</div>
</div>
<div id="step-3.3.3-warnings-and-simplicity" class="section level3">
<h3><span class="header-section-number">0.16.4</span> Step 3.3.3: Warnings and Simplicity</h3>
<p>Consider the case of the scalep function, which currently takes a 2-column dataframe as an input, divides the second column by the first, and returns/graphs some scaled proportion of the quotient vector. One version of this function, which follows almost all of the guidelines above, might look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">scalep &lt;-<span class="st"> </span><span class="cf">function</span>(d, <span class="dt">x=</span><span class="dv">1</span>){

  <span class="co"># Intialize resulting vector</span>
  result &lt;-<span class="st"> </span><span class="kw">c</span>()

  <span class="co"># Iterate through and divide column 2 of d by column 1 of d</span>
  i &lt;-<span class="st"> </span><span class="dv">0</span>
  <span class="cf">while</span>(i <span class="op">&lt;</span><span class="st"> </span><span class="kw">length</span>(d[ ,<span class="dv">1</span>]) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>){
    row &lt;-<span class="st"> </span>d[i,]
    result &lt;-<span class="st"> </span><span class="kw">append</span>(result, row[[<span class="dv">2</span>]]<span class="op">/</span>row[[<span class="dv">1</span>]])
    i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
  }

  <span class="co"># Print the graph using either ggplot2 or the hist function</span>
  <span class="cf">if</span> (<span class="kw">requireNamespace</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)) {
    <span class="kw">print</span>(ggplot2<span class="op">::</span><span class="kw">qplot</span>(result, <span class="dt">geom=</span><span class="st">&#39;histogram&#39;</span>))
  } <span class="cf">else</span> {
    <span class="kw">print</span>(<span class="kw">hist</span>(result))
  }

  <span class="co"># Return the result, multiplying by the optional scalar</span>
  result &lt;-<span class="st"> </span>x<span class="op">*</span>result
  <span class="kw">return</span>(result)
}</code></pre></div>
<p>However, this function still has a couple of problems. It’s not super easy to use because (a) it’s understandably hard for other programmers to remember which column is divided by which and (b) there’s a simpler way to accomplish the code above which will make it more readable. Specifically, it might be easier to just have arguments called ‘factors’ and ‘divisors’ and then divide them, like this</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">scalep &lt;-<span class="st"> </span><span class="cf">function</span>(factors, divisors, <span class="dt">constant =</span> <span class="dv">1</span>) {

  <span class="co"># Divide and multiply by optional scalar</span>
  proportions &lt;-<span class="st"> </span>constant<span class="op">*</span>factors<span class="op">/</span>divisors

  <span class="co"># Print the graph using either ggplot2 or the hist function</span>
  <span class="cf">if</span> (<span class="kw">requireNamespace</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)) {
    <span class="kw">print</span>(ggplot2<span class="op">::</span><span class="kw">qplot</span>(proportions, <span class="dt">geom=</span><span class="st">&#39;histogram&#39;</span>))
  } <span class="cf">else</span> {
    <span class="kw">print</span>(<span class="kw">hist</span>(proportions))
  }

  <span class="co"># Return the result</span>
  <span class="kw">return</span>(proportions)
}</code></pre></div>
<p>The new argument structure will make it a bit easier to use. Similarly, the new structure simplifies the code, making it a bit more readable. However, it does pose one problem: whereas the previous structure mandated that the two vectors be the same length (because they were part of a dataframe), in this function, the two vectors might not be the same length and the function would not always throw an error (specifically, if ‘factors’ has a length which is is an integer multiple of the length of ‘divisors’, R will not warn the user at all). This problem is a type of <strong>silent error</strong> (silent errors are bugs which do not issue warnings or errors). Silent errors are terrible because they make bug-hunting extremely difficult: in large repositories of code, it becomes nearly impossible to find which specific line is causing problems without some kind of warning. Thus, it’s also worth adding in a couple of lines to warn the user if the factors and divisors are of different lengths, as is outlined below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Check divisors and factors are the same length</span>
  <span class="cf">if</span> (<span class="kw">length</span>(divisors) <span class="op">!=</span><span class="st"> </span><span class="kw">length</span>(factors)) {
    <span class="kw">warning</span>(<span class="st">&#39;Length of divisors argument is not equal to length of factors argument&#39;</span>)
  }</code></pre></div>
<p>Lastly, it’s just worth adding an extra optional argument to let your users turn off the graphing feature of scalep, just to make the function more useable, as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">scalep &lt;-<span class="st"> </span><span class="cf">function</span>(factors, divisors, <span class="dt">constant =</span> <span class="dv">1</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>) {
  
  ...

  <span class="co"># If graph = True, print the graph using either ggplot2 or the hist function</span>
  <span class="cf">if</span> (<span class="kw">requireNamespace</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>) <span class="op">&amp;</span><span class="st"> </span>graph) {
    <span class="kw">print</span>(ggplot2<span class="op">::</span><span class="kw">qplot</span>(proportions, <span class="dt">geom=</span><span class="st">&#39;histogram&#39;</span>))
  } <span class="cf">else</span> <span class="cf">if</span> (graph) {
    <span class="kw">print</span>(<span class="kw">hist</span>(proportions))
  }
  
  ...</code></pre></div>
<p>To summarize, this subsection thus contained three core ideas: (1) make your code simple, (2) make it easy to use by labeling arguments, and (3) always avoid silent errors.</p>
</div>
<div id="step-3.4-documenting-your-package" class="section level3">
<h3><span class="header-section-number">0.16.5</span> Step 3.4: Documenting your package</h3>
<p>(Note: here, we describe how to document functions. For a more detailed description of how to document S3, S4, and reference classes, check out <a href="http://r-pkgs.had.co.nz/man.html">this page</a>.)</p>
<p>Creating documentation for your package is incredibly easy with Roxygen2. The first thing to do, if you haven’t already done it, is to install and load roxygen2 (as documented in the RStudio guidelines page), and then to check the options demonstrated at the end of Step 3.1 in this file.</p>
<p>When you write documentation with roxygen2, the final product should look something like this, which generates the documentation for the “general_sqrt” function above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; Generalized Square Roots</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; \code{general_sqrt} returns the square root of any real number</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @param x A real number - integers or doubles are both acceptable.</span>
<span class="co">#&#39; @return A complex value. If x is positive, the imaginary component is equal to 0;</span>
<span class="co">#&#39; if x is negative, the real component is equal to 0.</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @examples</span>
<span class="co">#&#39; general_sqrt(10)</span>
<span class="co">#&#39; general_sqrt(-10)</span>
<span class="co">#&#39; general_sqrt(-1)</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @export</span>
<span class="co"># This function takes the complex square root of real numbers</span>

general_sqrt &lt;-<span class="st"> </span><span class="cf">function</span> (x) {

  <span class="co"># Return the normal square root if x &gt; 0</span>
  <span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">||</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {
    <span class="kw">return</span>(<span class="kw">complex</span>(<span class="dt">real=</span><span class="kw">sqrt</span>(x), <span class="dt">imaginary=</span><span class="dv">0</span>))
  }

  <span class="co"># Else return the complex square root</span>

  <span class="cf">else</span> {
    <span class="kw">return</span>(<span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="op">-</span>x)))
  }

}</code></pre></div>
<div class="figure">
<img src="Images/PackageSS/gensqrtdoc.PNG" />

</div>
<p>Note that inside the R script, the documentation appears right above the definition of the function - this is helpful because it will help you remember to keep your documentations/functions up to date with each other. Let’s work through how this documentation was generated.</p>
<ol style="list-style-type: decimal">
<li><p>Note that everything you write in Roxygen2 should be preceded by a #’ character combo. This signals to the RStudio environment that you’re writing documentation, not code.</p></li>
<li><p>You should start your documentation with a very short (2-4 word) title of the function. In the example given above, the “general_sqrt” function is titled “Generalized Square Roots.”</p></li>
<li><p>You should describe your functions’ parameters using the ‘<span class="citation">@param</span>’ signifier. This should succintly describe the type (i.e. double, integer, character) of the parameter, as well as its function, as well as any potential default value.</p></li>
<li><p>You should document the type of output your function returns. Is it an integer, a dataframe, a matrix? Does it depend on the input? Your documentation should answer these questions!</p></li>
<li><p>You <em>must</em> provide examples of your function’s use. These are pretty critical, because a lot of programmers will just skip straight to the examples (and only look at the rest of the documentation if the examples are unclear).</p></li>
<li><p>You may choose to write ‘<span class="citation">@export</span>’ at the end of your documentation block. You should only do this if you want other people to use the function that you’re exporting, because exporting it will make sure it shows up in the namespace. Most functions you write won’t be exported - for example, if you write a helper function like ‘loss’ which is only used in service of a larger function, it shouldn’t be exported (exporting too many functions ‘clutters’ the namespace). Normally, a function as simple as ‘general_sqrt’ probably wouldn’t be exported, but we have exported it for the sake of providing a simple example.</p></li>
</ol>
<p>Once you’ve written all your documentation, it’s fairly simple to check what it looks like. You should either hit Control+Shift+D, or head to Build&gt;Document in the top pane, which will then automatically generate your documentation. Then, if you’ve documented a function, you can type ?[function name] into the console, and the documentation should automatically pop up!</p>
<p>(If ‘Build’ does not show any subobptions and Control+Shift+D is not doing what you expect, it’s possible that RStudio does not realize you’re supposed to be working inside a package. To get this to happen, in the “Files” tab in the lower right hand corner of RStudio, navigate to your project, and click on the [Project_Name.Rproj] file. Then RStudio should automatically restart and open the project, and you should be able to build or document the package. A picture of what you should click is given below.)</p>
<div class="figure">
<img src="Images/PackageSS/openproj.PNG" alt="Here, you would click devex.Rproj to open the package" />
<p class="caption"><em>Here, you would click devex.Rproj to open the package</em></p>
</div>
<p>After documenting your package, you can also click the ‘/man’ folder to inspect the documentation html files Roxygen2 generates, but it will probably be less informative than simply typing ?[function name] into the console.</p>
</div>
<div id="step-3.5-optional-adding-and-documenting-data" class="section level3">
<h3><span class="header-section-number">0.16.6</span> Step 3.5 (Optional): Adding and Documenting Data</h3>
<p>Sometimes, you’ll want to include data as part of your package, either to serve as an example for users or because your functions need it to work. Let’s walk through how to include (and document) data in your package. Note that there are at least two kinds of data you should think about including, but for both kinds of data, you should generally save them as ‘.rdata’ or ‘.rda’ files (which are the same thing).</p>
<div id="step-3.5.1-including-data-which-should-be-available-to-users" class="section level4">
<h4><span class="header-section-number">0.16.6.1</span> Step 3.5.1: Including data which should be available to users</h4>
<p>All of the data you want to be available to users should be saved in a folder called “data” inside your project. The way to do this is to write and run a script which loads your data into R and then uses the devtools function “use_data” to save it to a path inside ‘data.’ Even if you do not already have a folder called ‘data’ in your package, the use_data function will make it for you. Note that for this to work, your working directory must be set to the package you’re writing, otherwise devtools won’t know where to put your data.</p>
<p>For example, when documenting the scalep function, Grace might want to include data as an example of a way to use scalep. To this end, she’s generated a (totally fake) csv file which lists 100 people’s income and luxury spending, and has saved it to the</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">luxspending &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;C:/Users/Grace/Documents/R/datapath.csv&#39;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">sep=</span><span class="st">&#39;,&#39;</span>)
devtools<span class="op">::</span><span class="kw">use_data</span>(luxspending)</code></pre></div>
<p>Data in your ‘data’ folder will effectively always be exported, so you always must document it. To document data, you should create an R Script in your ‘R’ directory called [‘data.R’] and use Roxygen2 to document the data similarly to the way you’d document a function. For example, Grace might document the aforementioned data in the following way:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; Luxury spending of 100 individuals</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; This dataset lists the net incomes and the luxury spending</span>
<span class="co">#&#39; of 100 individuals.</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @format A data frame with 100 rows and 2 columns.</span>
<span class="co">#&#39; \describe{</span>
<span class="co">#&#39;   \item{Income}{Total Income, in USD}</span>
<span class="co">#&#39;   \item{Luxury_goods}{Spending on luxury goods, in USD}</span>
<span class="co">#&#39;}</span>
<span class="co">#&#39; @source This dataset was randomly generated</span>
<span class="co">#&#39; and is intended only to be used as an example for package</span>
<span class="co">#&#39; development and the scalep function.</span>
<span class="st">&quot;luxspending&quot;</span></code></pre></div>
<p>This should all look pretty similar to documenting functions. Note that ‘<span class="citation">@format</span>’ is a tag which will allow you to describe the structure of a dataset, and it’s good practice to list what each column measures in this section. The ‘<span class="citation">@source</span>’ section describes where the data came from. Never write ‘<span class="citation">@export</span>’ in this section, as data here is already automatically exported.</p>
</div>
<div id="step-3.5.2-including-data-for-your-functions" class="section level4">
<h4><span class="header-section-number">0.16.6.2</span> Step 3.5.2: Including data for your functions:</h4>
<p>Some functions may rely on a predefined set of coefficients or other inputs which need to be included in the package. However, users shouldn’t generally have access to such data because otherwise they might accidentally radically change the way your function works. It’s best to put such data in ‘R/sysdata.rda’, because then users won’t easily be able to access and accidentally modify it. As before, the way to include data in this way is to write a script which loads the data into R and then use the ‘use_data’ function to save it, but you should also include a parameter ‘interior = TRUE’ in the function call to let R know that this is interior, not exterior, data. For example, if one of Grace’s functions functions depended on a matrix called “coefficients”, he might run the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">coefficients &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;C:/Users/Grace/Documents/R/coefs.csv&#39;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">sep=</span><span class="st">&#39;,&#39;</span>)
devtools<span class="op">::</span><span class="kw">use_data</span>(coefficients, <span class="dt">interior =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Data in ‘R/sysdata.rda’ is never exported, so there’s no need to document it.</p>
</div>
</div>
<div id="step-3.6-building-your-package" class="section level3">
<h3><span class="header-section-number">0.16.7</span> Step 3.6: Building Your Package</h3>
<p>You’re almost done at this point! You’ve written your functions, modified the description, documented your functions, and presumably exported some of them; you’re now ready to <em>build</em> your package. Specifically, you should go to Build &gt; Check Package. If you don’t see any options under Build, you probably need to open your .Rproj file in the “file” section of RStudio (upon doing this, RStudio should restart briefly and then you will see more Build options).</p>
<p>Upon checking the package, RStudio will tell you if there are any warnings or errors raised by its automatic checking process. For example, it might tell you that a piece of documentation mismatches its complimentary function, or that the package needs an extra dependence. It’s best to fix all of the problems RStudio points out, whether they are warnings or errors.</p>
<p>Lastly, you can go to Build &gt; Install and Restart, and then RStudio will build your package, restart, and load your package into R (using the library command). Then, you can use your package!</p>
</div>
</div>
<div id="tips-and-tricks-1" class="section level2">
<h2><span class="header-section-number">0.17</span> 4. Tips and Tricks</h2>
<p>First, there’s a wonderful cheat sheet for package development linked <a href="https://www.rstudio.com/wp-content/uploads/2015/06/devtools-cheatsheet.pdf">here</a>.</p>
<p>Second, if you are looking for a quick (and very simple) example of a package, the devex package can be found here. If you’re having trouble understanding the workflow for package development, it’s worth looking through the devex package and making sure you understand all its components. Better yet, you can practice using roxygen2 and devtools by creating a very small/useless package (2-3 simple functions).</p>
<p>Third, if you’re having trouble, you can always just reference stackexchange.</p>
</div>
<div id="sources-cited-1" class="section level2">
<h2><span class="header-section-number">0.18</span> 5. Sources cited:</h2>
<p>A huge thank you again to Hadley Wickham and his book R Packages, linked <a href="http://r-pkgs.had.co.nz/intro.html">here</a>.</p>

<p>The previous page in the guide discussed <a href="./packagedev.html">package structure</a>. The next page in the guide is the <a href="./conclusion.html">Conclusion</a>. This page will walk you through the proper way to test packages using the testthat helper package. Another quick reminder: for those who do not want to use RStudio, it’s worth following along by reading the <a href="https://www.rdocumentation.org/packages/testthat/versions/2.0.0">testthat documentation</a> and <a href="https://www.rdocumentation.org/packages/testthat/versions/2.0.0/source">source code</a>. If you’ve installed and read through the RStudio guide, you’re good to go!</p>
<p>You can find the ‘devex’ example package linked <a href="https://github.com/amspector100/packageguidelines/tree/master/devex">here, on GitHub</a>, if you’d like to look through it while reading the guide.</p>
</div>
<div id="why-should-you-test" class="section level2">
<h2><span class="header-section-number">0.19</span> 1. Why should you test?</h2>
<p>Suppose Grace has created a package and has been using it for a while, but she decides she’d like to modify one function to improve it. She modifies her function, tests it a bit, and then pushes her package to GitHub. Yet two weeks later, Carlos discovers that the changes she made created a bug in <em>another</em> function in the package! This situation is very annoying, especially if Carlos has no idea what has caused the bug or how to fix it.</p>
<p>The solution to problems like this is to testing your package <em>systematically</em> and <em>automatically</em>. If Grace had rigorously tested the entire package before pushing it to GitHub, Carlos would never have had to deal with the new bug- Grace would have found out immediately. In other words, a good principle in package devleopment is to make sure your code <em>fails as fast as possible,</em> so you can find out and fix it. Of course, all programmers test their code, but not everyone tests systematically and automatically.</p>
<p>We’ll split this page of the guide into two big parts. First, we’ll talk creating automatic <em>unit tests</em>, which test individual blocks of code (usually individual functions or classes). Second, we’ll talk about the process of <em>continuous integration</em> (CI), whch is a process designed to help you test your code continuously in collaboration with others without spending huge amounts of time waiting for testing to finish. Ideally, by the end of this guide, you should be aiming to make your packages <em>developer-proof</em> - i.e. if you have collaborators, or someone tries to fix your package, you can proactively prevent them from breaking anything important by developing high-quality tests and using a CI workflow.</p>
</div>
<div id="unit-tests" class="section level2">
<h2><span class="header-section-number">0.20</span> 2. Unit Tests</h2>
<div id="what-are-unit-tests" class="section level3">
<h3><span class="header-section-number">0.20.1</span> 2.1: What are unit tests?</h3>
<p>Tests compare the <em>expected</em> output of a block of code to its <em>actual</em> output. For example, the following test tests whether the “generalized square root” function actually returns <span class="math inline">\(2\)</span> as the square root of <span class="math inline">\(4\)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">expect_equal</span>(<span class="kw">general_sqrt</span>(<span class="dv">4</span>), <span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">2</span>, <span class="dt">imaginary =</span> <span class="dv">0</span>))</code></pre></div>
<p><em>Unit tests</em> usually run on the computer of the developer who is modifying a package - for example, if Grace is updating her package, unit tests on her updates will run on her computer. Unit tests also should run automatically upon building a package.</p>
<p>We’ll talk a little more about how exactly to create tests down below, but hopefully this makes the general concept clear (you’ve also probably been using the general concept as you program).</p>
</div>
<div id="setting-up-the-testing-environment" class="section level3">
<h3><span class="header-section-number">0.20.2</span> 2.2: Setting up the testing environment</h3>
<p>Creating unit tests is actually quite easy, thanks to a package called ‘testtthat’ which works in combination with devtools. To begin, you should make sure ‘testthat’ is installed by running the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;testthat&#39;</span>)</code></pre></div>
<p>Next, you’ll want to make sure R recognizes you’re working on a package (you can do this by navigating to the .Rproj file in the ‘files’ tab in the bottom right corner of RStudio and clicking on it). Then, you can run the following command in the console:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">use_testthat</span>()</code></pre></div>
<p>This will do a couple of things. First, it will add ‘testthat’ to the Suggests part of the DESCRIPTION, which will help other collaborators know to use testthat when modifying/working on the package. It will also create a ‘tests/testthat’ directory in your project, as well a file called ‘test/testthat.R’, as shown below.</p>
<div class="figure">
<img src="Images/TestSS/devtoolstestthat.PNG" />

</div>
</div>
<div id="expectations" class="section level3">
<h3><span class="header-section-number">0.20.3</span> 2.3: Expectations</h3>
<p>Before discussing how to write unit tests, we need to properly describe an expectation. An expectation tests whether the actual output of a single function call is what the developer expected. The ‘testthat’ package has a number of functions which compare outputs to expected values. When calling one of these functions, one of two things can happen:</p>
<ol style="list-style-type: decimal">
<li>If the actual output matches the expectation, nothing will happen!</li>
<li>If the actual output does not match the expectation, it will throw an error.</li>
</ol>
<p>For example, ‘expect_equal()’ uses the base R function ‘all.equal()’ to check whether an output is (approximately) equal to an expectation. In the following code, the first function call will do nothing - the second function call will throw an error, displayed below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(testthat)
testthat<span class="op">::</span><span class="kw">expect_equal</span>(<span class="dv">2</span>, <span class="dv">2</span>)
testthat<span class="op">::</span><span class="kw">expect_equal</span>(<span class="dv">2</span>, <span class="dv">4</span>)</code></pre></div>
<div class="figure">
<img src="Images/TestSS/expectationerror.PNG" />

</div>
<p>Here’s an (abbreviated) list of the expectation functions:</p>
<ol style="list-style-type: decimal">
<li><strong>expect_equal</strong>, as aforementioned, checks equality using the “all.equal()” base function.</li>
<li><strong>expect_identical</strong> checks equality using the “identical()” base function. Generally, it’s better to use “expect_equal” because lots of R functions use numerical approximations which will cause expect_identical to fail when you don’t want it to.</li>
<li><strong>expect_match</strong>, <strong>expect_output</strong>, <strong>expect_message</strong>, <strong>expect_warning</strong>, and <strong>expect_error</strong> all respectively test whether a string, output, warning, or error match a regular expression. For example, the following two expectations functions will not throw errors:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">testthat<span class="op">::</span><span class="kw">expect_match</span>(<span class="st">&#39;hello1234&#39;</span>, <span class="st">&#39;hello&#39;</span>)
testthat<span class="op">::</span><span class="kw">expect_warning</span>(<span class="kw">sqrt</span>(<span class="op">-</span><span class="dv">2</span>), <span class="st">&#39;NaNs produced&#39;</span>)</code></pre></div>
<p>The tests do not fail because (i) ‘hello1234’ contains ‘hello’ and (ii) the error message produced by sqrt(-2) contains the phrase ‘NaNs produced’.</p>
<ol start="4" style="list-style-type: decimal">
<li><strong>expect_is</strong> tests whether an object inherets from a class, specified in quotes. For example, the following test passes:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">testthat<span class="op">::</span><span class="kw">expect_is</span>(<span class="kw">sqrt</span>(<span class="dv">2</span>), <span class="st">&#39;numeric&#39;</span>)</code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li><strong>expect_true</strong> and <strong>expect_false</strong> respectively expect a statement to evaluate to true or false.</li>
</ol>
</div>
<div id="structure-and-location-of-unit-tests" class="section level3">
<h3><span class="header-section-number">0.20.4</span> 2.4: Structure and Location of Unit Tests</h3>
<p>Each <em>unit test</em> (which is written in an R script) should use a couple of expectations to test a single core function. It should use the function “test_that” (from the “testthat” package). “test_that” takes two parameters: a string, which describes the test, and a couple of expectations, surrounded by curly braces. For example, the following code will test whether the general_sqrt function from the devex package returns a complex number.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">test_that</span>(<span class="st">&quot;Returns complex number&quot;</span>, {
  <span class="kw">expect_is</span>(<span class="kw">general_sqrt</span>(<span class="op">-</span><span class="dv">2</span>), <span class="st">&#39;complex&#39;</span>)
  <span class="kw">expect_is</span>(<span class="kw">general_sqrt</span>(<span class="dv">2</span>), <span class="st">&#39;complex&#39;</span>)
  <span class="kw">expect_is</span>(<span class="kw">general_sqrt</span>(<span class="dv">0</span>), <span class="st">&#39;complex&#39;</span>)
})</code></pre></div>
<p>Multiple tests with similar functions should be put in the same file, and those test files must be put in the tests/testthat/ directory. Moreover, their name must start with the word ‘test’ - this will help RStudio automatically run your tests for you. For example, in the devex package, there are two very simple helper functions (‘general_sqrt’ and ‘loss’) and one moderately complex function (‘scalep’). As a result, the devex package has exactly two testing files: one called ‘testhelpers,’ which tests the helper functions, and another called ‘testscalep’, which tests the scalep function. The testhelpers file looks like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devex)
<span class="kw">context</span>(<span class="st">&quot;generalized sqrt and loss&quot;</span>)

<span class="co"># Generalized sqrt ---------------------------------------</span>

<span class="kw">test_that</span>(<span class="st">&quot;Returns complex number&quot;</span>, {
  <span class="kw">expect_is</span>(<span class="kw">general_sqrt</span>(<span class="op">-</span><span class="dv">2</span>), <span class="st">&#39;complex&#39;</span>)
  <span class="kw">expect_is</span>(<span class="kw">general_sqrt</span>(<span class="dv">2</span>), <span class="st">&#39;complex&#39;</span>)
  <span class="kw">expect_is</span>(<span class="kw">general_sqrt</span>(<span class="dv">0</span>), <span class="st">&#39;complex&#39;</span>)
})

<span class="kw">test_that</span>(<span class="st">&quot;Returns correct sqrt&quot;</span>, {
  <span class="kw">expect_equal</span>(<span class="kw">general_sqrt</span>(<span class="op">-</span><span class="fl">1.53</span>), <span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="fl">1.53</span>)))
  <span class="kw">expect_equal</span>(<span class="kw">general_sqrt</span>(<span class="op">-</span><span class="dv">2</span>), <span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="dv">2</span>)))
})

<span class="kw">test_that</span>(<span class="st">&quot;Warnings for vectors of length &gt; 1&quot;</span>, {
  <span class="kw">expect_warning</span>(<span class="kw">general_sqrt</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">0</span>)))
  <span class="kw">expect_warning</span>(<span class="kw">general_sqrt</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">2</span>)), <span class="st">&#39;NaNs produced&#39;</span>)
})

<span class="co"># Loss ---------------------------------------------------</span>

<span class="kw">test_that</span>(<span class="st">&quot;Returns correct loss&quot;</span>, {
  <span class="kw">expect_equal</span>(<span class="kw">loss</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">9</span>)
  <span class="kw">expect_equal</span>(<span class="kw">loss</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)), <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">4</span>))
  <span class="kw">expect_equal</span>(<span class="kw">loss</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">5</span>, <span class="op">-</span><span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">25</span>, <span class="dv">4</span>))
<span class="er">}</span>)</code></pre></div>
<p>Each test file, as demonstrated above, needs to load the package of interest (using ‘library’ is fine) and also should supply a string which succinctly describes the general purpose of all of the tests in the test file to the ‘context’ function.</p>
<p>You can run all of the tests in the test/testthat directory by clicking Build&gt;Check Package or Control Shift E. If any test throws an error, RStudio will report two things. First, it will report the string given in the test which was given to the ‘test_that’ function call. Second, it will report the filename of the test file as well as the line of code that threw an error. For example, running the above tests yields the following result:</p>
<div class="figure">
<img src="Images/TestSS/testthaterror1.PNG" />

</div>
<p>This indicates that line 18 of testhelpers.R failed in the test “Warnings for vectors of length &gt; 1.” Looking at the test code reveals that the general_sqrt function does not return a warning for positive vectors of length greater than one.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">expect_warning</span>(<span class="kw">general_sqrt</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">0</span>)))</code></pre></div>
<p>To fix this, it might be worth adding in an extra line or two which ensures that the input to general_sqrt is as it should be (in order to prevent users from getting unexpected results).</p>
</div>
<div id="tips-for-making-good-tests" class="section level3">
<h3><span class="header-section-number">0.20.5</span> 2.5: Tips for making good tests</h3>
<p>Good tests have a couple of characteristics.</p>
<p><strong>First</strong>, good tests have high <em>coverage,</em> meaning that they test a large percentage of the lines of code of the package. For example, the code for the general_sqrt function is as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This function takes the complex square root of real numbers</span>

general_sqrt &lt;-<span class="st"> </span><span class="cf">function</span> (x){
  
  <span class="co"># Issue warning for longer vectors</span>
  <span class="cf">if</span> (<span class="kw">length</span>(x) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) {
    <span class="kw">warning</span>(<span class="st">&#39;Argument of general_sqrt has length greater than 1&#39;</span>)
  }

  <span class="co"># Return the normal square root if x &gt; 0</span>
  <span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">||</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){
    <span class="kw">return</span>(<span class="kw">complex</span>(<span class="dt">real =</span> <span class="kw">sqrt</span>(x), <span class="dt">imaginary =</span> <span class="dv">0</span>))
  }

  <span class="co"># Else return the complex square root</span>

  <span class="cf">else</span> {
    <span class="kw">return</span>(<span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="op">-</span>x)))
  }

}</code></pre></div>
<p>The following test has low coverage for the general_sqrt function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">test_that</span>(<span class="st">&quot;Returns correct sqrt&quot;</span>, {
  <span class="kw">expect_equal</span>(<span class="kw">general_sqrt</span>(<span class="op">-</span><span class="fl">1.53</span>), <span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="fl">1.53</span>)))
  <span class="kw">expect_equal</span>(<span class="kw">general_sqrt</span>(<span class="op">-</span><span class="dv">2</span>), <span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="dv">2</span>)))
})</code></pre></div>
<p>because it only tests whether general_sqrt returns the correct square root for negative numbers. This test thus only covers half of the code in general_sqrt, because the mechanism for dealing with nonnegative numbers is entirely separate. The following test is a better example, because it tests both positive and negative numbers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">test_that</span>(<span class="st">&quot;Returns correct sqrt&quot;</span>, {
  <span class="kw">expect_equal</span>(<span class="kw">general_sqrt</span>(<span class="fl">1.53</span>), <span class="kw">complex</span>(<span class="dt">real =</span> <span class="kw">sqrt</span>(<span class="fl">1.53</span>), <span class="dt">imaginary =</span> <span class="dv">0</span>))
  <span class="kw">expect_equal</span>(<span class="kw">general_sqrt</span>(<span class="op">-</span><span class="dv">2</span>), <span class="kw">complex</span>(<span class="dt">real =</span> <span class="dv">0</span>, <span class="dt">imaginary =</span> <span class="kw">sqrt</span>(<span class="dv">2</span>)))
})</code></pre></div>
<p><strong>Second</strong>, it’s important to remember that coverage is only important because tests with high coverage tend to test all the different functionalities of a package. It’s possible to have tests which have very high coverage but aren’t great tests. Consider the following example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">print_it &lt;-<span class="st"> </span><span class="cf">function</span>(text){
  <span class="kw">print</span>(<span class="st">&#39;hello&#39;</span>)
}

testthat<span class="op">::</span><span class="kw">expect_warning</span>(<span class="kw">print_it</span>(<span class="st">&#39;hi&#39;</span>), <span class="ot">NA</span>)</code></pre></div>
<pre><code>## [1] &quot;hello&quot;</code></pre>
<p>This expectation has 100% coverage because it will run every line of code (the expectation will also pass because no warning will be thrown). However, it’s not sufficient alone because it doesn’t actually test whether print_it returns the desired output: in this case, print_it will always print ‘hello’. In other words, the expectation does not test all of the functionality of the function.</p>
<p><strong>Third</strong>, tests should run relatively quickly, if possible. Sometimes, it’s okay to maximize coverage even if you don’t test every single functionality to save time, because <em>usually</em> high coverage ensures you test most of the functionality of the package. This is particularly true because lots of integrated testing software (which we’ll discuss in integrated tests) will not be able to easily run tests which take too long. More on that later.</p>
<p><strong>Fourth</strong>, tests should be clear to the reader, because sometimes there are bugs in tests too. If others eventually help develop or maintain your packages, they’ll want to know what it means when a test fails. Moreover, for large packages, you yourself may have trouble remembering the exact details of every test you’ve written. Thus, your tests should return clear error messages and be readable. For example, the following test is a bad example, for two reasons:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sigmoid &lt;-<span class="st"> </span><span class="cf">function</span>(x, a, b){
  <span class="kw">return</span>(<span class="kw">exp</span>(a<span class="op">*</span>x)<span class="op">/</span>(<span class="kw">exp</span>(a<span class="op">*</span>x) <span class="op">+</span><span class="st"> </span>b))
}

<span class="kw">test_that</span>(<span class="st">&#39;sigmoid output&#39;</span>, {
  <span class="kw">expect_equal</span>(<span class="kw">sigmoid</span>(<span class="fl">0.3068528</span>, <span class="dv">1</span>, <span class="fl">1.3591409</span>), <span class="fl">0.5</span>, <span class="dv">10</span><span class="op">^-</span><span class="dv">7</span>)
})</code></pre></div>
<p>The string ‘sigmoid output’ does not describe the purpose of the test, which is to test the precision of the sigmoid output. This means that if the test fails, it will be hard to tell what’s wrong. Additionally, the purpose of the test is not clear to begin with - what do the seemingly random decimals mean? At the very least, it’s probably worth putting comments in explaining the point of the test, as shown below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sigmoid &lt;-<span class="st"> </span><span class="cf">function</span>(x, a, b){
  <span class="kw">return</span>(<span class="kw">exp</span>(a<span class="op">*</span>x)<span class="op">/</span>(<span class="kw">exp</span>(a<span class="op">*</span>x) <span class="op">+</span><span class="st"> </span>b))
}

<span class="kw">test_that</span>(<span class="st">&#39;test sigmoid precision&#39;</span>, {
  
  <span class="co"># Check sigmoid(ln(e/2), ln(e/2), e/2) is very close to 1/2.</span>

  <span class="kw">expect_equal</span>(<span class="kw">sigmoid</span>(<span class="fl">0.3068528</span>, <span class="dv">1</span>, <span class="fl">1.3591409</span>), <span class="fl">0.5</span>, <span class="dv">10</span><span class="op">^-</span><span class="dv">7</span>)
})</code></pre></div>
<p>This test is a bit more interpretable and delivers a better error message.</p>
</div>
<div id="automated-checks-and-automated-testing" class="section level3">
<h3><span class="header-section-number">0.20.6</span> 2.6: Automated Checks and Automated Testing</h3>
<p>Before you <em>build</em> your package, you should <em>check</em> it using the automated check feature in RStudio, which is really wonderful. Running an automated check will ensure your documentation is up to date, check a variety of other parts of your package, and most importantly, it will automatically run all of your unit tests. During and after the check, it will report which tests failed (and which lines of code caused those failures. Even your pakage passes all of its tests, you might still see additional warnings for other reasons, as exemplified below:</p>
<div class="figure">
<img src="Images/TestSS/autobuildresults.PNG" />

</div>
<p>Although it’s not necessary to understand every check that RStudio runs, it’s worth noting that every check it performs is relatively important, and if RStudio signals any warnings or errors, it’s definitely worth fixing them. It’s also probably worth fixing any “notes” it issues. If you’re curious, you can read more about what each type of check in the automated check does (here)[<a href="http://r-pkgs.had.co.nz/check.html#check" class="uri">http://r-pkgs.had.co.nz/check.html#check</a>].</p>
</div>
<div id="bonus-the-goodpractice-package" class="section level3">
<h3><span class="header-section-number">0.20.7</span> 2.7: Bonus: The goodpractice Package</h3>
<p>The aforementioned automated checking system for R is pretty good, but there is a slightly more comprehensive version: the goodpractice package. The goodpractice package has an informative name - the entire purpose of the package is to check whether your package follows proper package development conventions and procedures (i.e. whether your package follows good practices). For example, running the goodpractice package on the devex package yielded the following helpful results:</p>
<div class="figure">
<img src="Images/TestSS/goodpractice1.PNG" />

</div>
<p>Using the goodpractice package to get a result like that is very simple. If you don’t have RStudio, using goodpractice is well documented in <a href="https://github.com/MangoTheCat/goodpractice/blob/master/vignettes/goodpractice.Rmd">vignettes on Github</a>, and of course all of the source code is available on GitHub and <a href="https://www.rdocumentation.org/packages/goodpractice/versions/1.0.2/source">here</a>. For RStudio users, we’ll through the key points of using goodpractice below.</p>
<p>To install the goodpractice package, just run the following command in the RStudio console:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;goodpractice&#39;</span>)</code></pre></div>
<p>Once you’ve installed the goodpractice package, you basically only need to know a single function from it: the ‘gp()’ or ‘goodpractice()’ functions (which do exactly the same thing). These functions will run comprehensive automated checks on your package, and take exactly one input, the path of your built package. However, it’s important to note that the path of your <em>built</em> package is not identical to the path of the repo containing it. For example, I work on the ‘devex’ package in “C:/Users/amspe/Documents/R/packageguidelines/devex”, but the built package lives at “C:/Users/amspe/Documents/R/win-library/3.5/devex”. For goodpractice to work, you need to use the paths of the <em>second</em> form, i.e. where the built package lives. If you don’t know this path immediately, you can use the “system.file” function to retrieve it for you, as demonstrated below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Retrieve path</span>
package_path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="dt">package =</span> <span class="st">&#39;devex&#39;</span>)

<span class="co"># Check package</span>
<span class="kw">library</span>(goodpractice)
<span class="kw">gp</span>(package_path)</code></pre></div>
<p>And that’s it! The goodpractice package is a bit picky, so it’s okay to leave a few concerns unresolved, but in general it gives good advice. If you’re very diligent, you might eventually see a result like this:</p>
<div class="figure">
<img src="Images/TestSS/goodpractice2.PNG" />

</div>
<p>which signals that your package conforms to all goodpractices. Lastly, although it’s beyond the scope of this guide, you ought to know that you can create custom checks using the goodpractice package, as documented <a href="https://github.com/MangoTheCat/goodpractice/blob/master/vignettes/custom_checks.Rmd">here</a>.</p>
</div>
</div>
<div id="integrated-tests" class="section level2">
<h2><span class="header-section-number">0.21</span> 3. Integrated Tests</h2>
<div id="motivation-1" class="section level3">
<h3><span class="header-section-number">0.21.1</span> 3.1 Motivation</h3>
<p>Up to this point, you probably have not been pushing to GitHub too often. However, in large projects/packages where many programmers are working on the same package at once, it’s important to ensure each programmer continuously commits changes to GitHub to make sure all the changes are compatible with each other. This process of rapid updating of packages is referred to as <em>continuous integration</em>, and it can be very difficult to manage properly (it is sometimes referred to as <em>integration hell</em>, specifically because developers often waste lots of hours trying to make code integrate properly). When you commit changes continuously, it does not guarentee that all the changes will be compatible. However, if there are compatibility problems in updates, it does ensure that you’ll be able to find those problems more easily, because each individual change/commit is smaller.</p>
<p>For reasons we’ll discuss in a second, continuous integration is a bit easier said than done. Thankfully, there are two wonderful free continuous integration services that will make your life a lot easier. If you’re using windows, you’ll want to use the service called <em>Appveyor</em> - if you’re using Mac or Linux, you’ll want to use the service called <em>Travis CI</em>. These services will make continuous integration easy, specifically because both Appveyor and Travis CI link to GitHub and will run your build and tests for you on what are called virtual machines in the cloud.</p>
<p>Maybe the principle of continuous integration makes sense, but why are continuous integration services useful? Why can’t each developer build packages, run the tests locally, and then only push changes to GitHub if the tests are successful? There are three answers to this question.</p>
<ol style="list-style-type: decimal">
<li>For large projects, it often takes a long time to build them. Being able to build them on the cloud (using Appveyor/Travis) saves an enormous amount of time. (This is especially true for programming languages besides R, but it’s true for R too!)</li>
<li>Sometimes there may be global environmental settings on your particular computer which change the way the package works and the way tests run. Building and testing the package in a “clean” environment online makes the testing more robust.</li>
<li>Lastly, CI services offer settings to automatically ‘deploy’ or publish successful builds, for example by publishing code for a website. These are a bit beyond the scope of this guide, but they are documented <a href="https://www.appveyor.com/docs/deployment/">here (Appveyor)</a> and <a href="https://docs.travis-ci.com/user/deployment/">here (Travis)</a>.</li>
</ol>
</div>
<div id="the-integrated-testing-workflow" class="section level3">
<h3><span class="header-section-number">0.21.2</span> 3.2 The integrated testing workflow</h3>
<p>It’s important to note that Travis/Appveyor do not prevent you from pushing bad code to a repo - if you break your package and all your tests fail on Travis/Appveyor, you can still push the broken version to the master branch on GitHub. As a result, most developer teams use the following workflow to keep the master branch working at all times.</p>
<ol style="list-style-type: decimal">
<li>Someone sets up a “master repo” with a master branch on GitHub.</li>
<li>Each developer on the team creates a copy (also called a <em>fork</em>) of the master repo. Thus, each developer has their own repository.</li>
<li>Each developer makes changes to the project and then pushes those changes to their personal fork. After each push, Appveyor or Travis builds the package and test it.</li>
<li>If the Appveyor/Travis builds are successful, the developper will likely send a pull request to the master branch of the master repo, which will probably be accepted.</li>
</ol>
<p>This workflow allows each developer to make changes in their own repo and continuously build them using Travis/Appveyor without potentially breaking the master repo’s copy.</p>
</div>
<div id="setting-up-integrated-tests" class="section level3">
<h3><span class="header-section-number">0.21.3</span> 3.3 Setting up Integrated Tests</h3>
<p><strong>Step 1</strong>: To get started using continuous integration services, head to the Travis CI (Linux/Mac OS) or AppVeyor (Windows) website and “sign up”&quot; by signing into GitHub. At some point, Travis/AppVeyor will ask you to authorize its connection to GitHub, which you should authorize.</p>
<p><strong>Step 2</strong>: Once you authorize the connection, you need to specifically select which repos you’d like to use Travis/AppVeyor with. For example (in AppVeyor), upon signing up, you’ll see something like this screen:</p>
<div class="figure">
<img src="Images/TestSS/appveyor1.PNG" />

</div>
<p>You should click “new project” and then select the specific repo you’d like to use in combination with Travis/Appveyor. This means that you should at least initialize your project and push it to GitHub before you start using Travis/Appveyor.</p>
<p><strong>Step 3</strong>: Depending on whether you’re using Appveyor or Travis, you should run devtools::use_appveyor() or devtools::use_travis() in the console with your package open. This will create a file named ‘appveyor.yml’ or ‘travis.yml’ in the root directory of your package. These ‘.yml’ files will tell AppVeyor/Travis what to do. It’s actually not too important to understand everything they do, just because the devtools template generally works pretty well. However, you occasionally will have to modify it to suit specific needs. AppVeyor and Travis CI both have great documentation, linked <a href="https://www.appveyor.com/docs/build-configuration/">here for Appveyor</a> and <a href="https://docs.travis-ci.com/user/languages/r/">here for Travis</a>.</p>
<p>(Note - devtools also adds ‘appveyor.yml’ and ‘travis.yml’ to the .Rbuildignore to reduce clutter in your package.)</p>
<p><strong>Step 3.5: Dependency Issues</strong>: If you’re using Travis, it’s important to talk quickly about dependencies in packages. Travis was not originally designed for R projects, so occasionally it’s a bit shaky, specifically with regard to dependencies in packages (i.e. Travis will build your package online, but if your package depends on ggplot2, then Travis have to install ggplot2 before building your package). By default, Travis/Appveyor automatically install anything listed in the dependencies listed in the DESCRIPTION file for your project. However, occasionally something goes wrong. If you get error messages that look like Travis did not install of the dependencies, it’s worth specifying them in the .yml file. You can by adding a line like the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">r_packages<span class="op">:</span><span class="st"> </span>package_name</code></pre></div>
<p>in the .yml file (this will install the package the same way that RStudio installs it when you run ‘install.packages’). If you’d like to install a package using a different method (i.e. from a GitHub version of the package), there are lots of options listed in the <a href="https://docs.travis-ci.com/user/languages/r/">R-specific Travis documentation</a>. However, it’s important to remember that this is generally NOT necessary - Travis/Appveyor do a pretty good job of automatically detecting/installing dependencies as long as your DESCRIPTION file specifies them.</p>
<p><strong>Step 4</strong>: If you are working with many other developers on a single package, you should also add a ‘.gitattributes’ file into the root of your directory. This is because different operating systems handle different characters, for example line terminators, slightly differently. Modern Mac and Unix/Linux systems use ‘<span class="math inline">\(\n\)</span>’ to terminate the end of each line, in what is called the “line feed” or “LF” system, whereas Windows uses ‘<span class="math inline">\(\r\n\)</span>’ in the ‘Carriage Return Line Feed’ or CRLF system. The point is that the ‘.gitattributes’ file will ensure that each developer uses exactly the same line endings, because you can set the ‘text’ setting which controls the method of writing lineterminators.</p>
<p>The way it works is that the ‘.gitattribute’ file should be a line of path-patterns followed by specific attributes. These path-patterns (for a refresher, see the Atlanian guide <a href="https://www.atlassian.com/git/tutorials/saving-changes/gitignore">here</a>) are exactly the same path-patterns used in the .gitignore file, just for a different purpose. For example, one line might be</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">*</span><span class="st"> </span>text=auto</code></pre></div>
<p>where the “*&quot; refers to all files in the root directory, and the ‘text=auto’ sets the ‘text’ attribute to auto. Alternatively, you could write</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">R<span class="op">/</span><span class="er">*</span><span class="st"> </span>text=lf</code></pre></div>
<p>which forces all the scripts directly in the R subdirectory to use the ‘lf’ line terminator. You can personalize the gitattributes file if you like, but you can also just use the sample .gitattributes linked <a href="https://GitHub.com/krlmlr/r-appveyor/blob/master/.gitattributes">here</a>. You can download this file and move it to the root directory of your package (it must be in the root directory).</p>
<p>The git attributes file actually is useful for setting a variety of other attributes besides line endings, although some of them are a bit technical. If you’re curious to find out more about what the .gitattributes file can do, the full documentation is linked <a href="https://git-scm.com/docs/gitattributes">here</a>.</p>
<p>Once you do all of this, you’re set to go! When you push changes to GitHub, Travis/AppVeyor will automatically build and test the package for you. For example on Appveyor, if you sign in, you should see something like this:</p>
<div class="figure">
<img src="Images/TestSS/appveyor2.PNG" />

</div>
<p>and if your build succeeded, you’ll see a green line at the bottom like this:</p>
<div class="figure">
<img src="Images/TestSS/appveyor3.PNG" />

</div>
<p>otherwise you’ll see an error. If your build takes a while, that’s okay - you don’t need to wait for it to build, because Travis/Appveyor will email you automatically if the test fails. And that’s all there is to it!</p>
</div>
</div>
<div id="tips-and-tricks-2" class="section level2">
<h2><span class="header-section-number">0.22</span> 4. Tips and Tricks</h2>
<p>When testing, there are a couple of key principles to keep in mind:</p>
<ol style="list-style-type: decimal">
<li>You want to expose bugs as quickly as possible so they don’t create even larger headaches down the road! As Christopher Gandrud puts it, testing is all about ‘failing faster.’ To this end, you should continuously test your packages.</li>
<li>Make sure your tests <em>cover</em> the package code and also test all of the key functionality of the package. In an ideal world, a package should pass all of its tests only if all of its core functionality is bug-free.</li>
<li>Test names, organization, and error messages must be descriptive and easy to understand. One of the main purposes of tests is to inform you <em>where</em> your code is failing, and to understand that, you need informative error messages. Otherwise, you will find yourself spending hours traversing your code to find bugs.</li>
</ol>
<p>The devtools cheatsheet, linked <a href="https://www.rstudio.com/wp-content/uploads/2015/03/devtools-cheatsheet.pdf">here</a>, references a lot of the key components of the testthat package.</p>
<p>Lastly, working with .yml files can occasionally be difficult, although devtools should make it pretty to set up in the broad majority of cases. As always, when you run into errors, make full use of stackexchange and online resources provided by AppVeyor/Travis.</p>
</div>
<div id="sources-cited." class="section level2">
<h2><span class="header-section-number">0.23</span> 5. Sources cited.</h2>
<p>We used the Testing chapter of <a href="http://r-pkgs.had.co.nz/tests.html">R Packages by Hadley Wickham</a>, <a href="http://slides.com/christophergandrud/failing-faster#/24">Christopher Gandrud’s ‘Failing Faster’ Presentation</a>, and <a href="https://github.com/IQSS/social_science_software_toolkit/blob/master/testing/recommended_testing_tools_R.md#recommended-testing-tools-and-process-for-r-packages">Christopher Gandrud’s Broader Testing Guidelines</a> to help write this particular page of the guide.</p>

</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
